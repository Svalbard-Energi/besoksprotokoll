import{c as G,a as z,f as P}from"./DjTMbPtq.js";import{i as xt}from"./BRD9422p.js";import{G as Ze,h as U,a as wi,b as je,w as S,aw as bi,r as Si,H as Ri,s as ut,c as Ne,d as fe,k as Se,V as Ci,ad as Ti,Z as ht,e as xi,j as me,l as ki,ab as kt,aF as _t,i as Ue,an as _i,C as gt,aG as Lt,aH as Et,aI as Li,f as It,p as Ei,aJ as Oe,a7 as Ii,aK as zi,aL as Ni,aa as Oi,g as Te,a5 as qi,aM as zt,aN as Di,ar as Nt,aO as $i,aP as Hi,aQ as Ai,aR as Mi,aS as Ui,aT as Gi,aU as Wi,aV as Vi,aW as Bi,aX as Pi,ax as ee,o as V,ak as te,ao as oe,Q as Y,R as $,T as Q,U as Z,aY as he,aq as ce,O as K,P as B,u as Xi,S as ue,aZ as Zi}from"./Cs_YjP16.js";import{b as ji,d as Ke,e as Ki}from"./BbVB94iJ.js";import{i as Fi,n as Yi,c as Qi,s as Ji}from"./BUnyTobX.js";import{r as er}from"./CYAZTxY2.js";import{i as ne}from"./D-4ESfzQ.js";import{_ as dt,p as tr,c as Ge,b as Ot,r as Fe}from"./DsJZpXvB.js";import{s as ie}from"./BufhS9pZ.js";import{b as ir}from"./CfC_s9_v.js";function rr(t,e){if(e){const i=document.body;t.autofocus=!0,Ze(()=>{document.activeElement===i&&t.focus()})}}let pt=!1;function sr(){pt||(pt=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function ar(t,e){return e}function or(t,e,i){for(var r=[],s=e.length,a=0;a<s;a++)zi(e[a].e,r,!0);Ni(r,()=>{var o=r.length===0&&i!==null;if(o){var n=i,l=n.parentNode;Oi(l),l.append(n),t.items.clear(),j(t,e[0].prev,e[s-1].next)}for(var c=0;c<s;c++){var u=e[c];o||(t.items.delete(u.k),j(t,u.prev,u.next)),Te(u.e,!o)}t.first===e[0]&&(t.first=e[0].prev)})}function Re(t,e,i,r,s,a=null){var o=t,n={items:new Map,first:null},l=(e&zt)!==0,c=(e&Et)!==0,u=(e&Lt)!==0;if(l){var h=t;o=U?Ne(qi(h)):h.appendChild(Ue())}U&&wi();var g=null,d=bi(()=>{var w=i();return _t(w)?w:w==null?[]:kt(w)}),f,C=!0;function I(){nr(p,f,n,o,e,r),g!==null&&(f.length===0?(g.fragment?(o.before(g.fragment),g.fragment=null):It(g.effect),p.first=g.effect):Ei(g.effect,()=>{g=null}))}var p=je(()=>{f=S(d);var w=f.length;let E=!1;if(U){var k=Si(o)===Ri;k!==(w===0)&&(o=ut(),Ne(o),fe(!1),E=!0)}for(var _=new Set,b=xi,m=null,x=ki(),L=0;L<w;L+=1){U&&Se.nodeType===Ci&&Se.data===Ti&&(o=Se,E=!0,fe(!1));var N=f[L],J=r(N,L),O=C?null:n.items.get(J);O?(c&&ht(O.v,N),u?ht(O.i,L):O.i=L,x&&b.skipped_effects.delete(O.e)):(O=lr(C?o:null,m,N,J,L,s,e,i),C&&(O.o=!0,m===null?n.first=O:m.next=O,m=O),n.items.set(J,O)),_.add(J)}if(w===0&&a&&!g)if(C)g={fragment:null,effect:me(()=>a(o))};else{var lt=document.createDocumentFragment(),ct=Ue();lt.append(ct),g={fragment:lt,effect:me(()=>a(ct))}}if(U&&w>0&&Ne(ut()),!C)if(x){for(const[vi,yi]of n.items)_.has(vi)||b.skipped_effects.add(yi.e);b.oncommit(I),b.ondiscard(()=>{})}else I();E&&fe(!0),S(d)});C=!1,U&&(o=Se)}function nr(t,e,i,r,s,a){var o=(s&Di)!==0,n=e.length,l=i.items,c=i.first,u,h=null,g,d=[],f=[],C,I,p,w;if(o)for(w=0;w<n;w+=1)C=e[w],I=a(C,w),p=l.get(I),p.a?.measure(),(g??=new Set).add(p);for(w=0;w<n;w+=1){if(C=e[w],I=a(C,w),p=l.get(I),i.first??=p,!p.o){p.o=!0;var E=h?h.next:c;j(i,h,p),j(i,p,E),qe(p,E,r),h=p,d=[],f=[],c=h.next;continue}if((p.e.f&Oe)!==0&&(It(p.e),o&&(p.a?.unfix(),(g??=new Set).delete(p))),p!==c){if(u!==void 0&&u.has(p)){if(d.length<f.length){var k=f[0],_;h=k.prev;var b=d[0],m=d[d.length-1];for(_=0;_<d.length;_+=1)qe(d[_],k,r);for(_=0;_<f.length;_+=1)u.delete(f[_]);j(i,b.prev,m.next),j(i,h,b),j(i,m,k),c=k,h=m,w-=1,d=[],f=[]}else u.delete(p),qe(p,c,r),j(i,p.prev,p.next),j(i,p,h===null?i.first:h.next),j(i,h,p),h=p;continue}for(d=[],f=[];c!==null&&c.k!==I;)(c.e.f&Oe)===0&&(u??=new Set).add(c),f.push(c),c=c.next;if(c===null)continue;p=c}d.push(p),h=p,c=p.next}if(c!==null||u!==void 0){for(var x=u===void 0?[]:kt(u);c!==null;)(c.e.f&Oe)===0&&x.push(c),c=c.next;var L=x.length;if(L>0){var N=(s&zt)!==0&&n===0?r:null;if(o){for(w=0;w<L;w+=1)x[w].a?.measure();for(w=0;w<L;w+=1)x[w].a?.fix()}or(i,x,N)}}o&&Ze(()=>{if(g!==void 0)for(p of g)p.a?.apply()}),t.first=i.first&&i.first.e,t.last=h&&h.e,h&&(h.e.next=null)}function lr(t,e,i,r,s,a,o,n){var l=(o&Et)!==0,c=(o&Li)===0,u=l?c?_i(i,!1,!1):gt(i):i,h=(o&Lt)===0?s:gt(s),g={i:h,v:u,k:r,a:null,e:null,o:!1,prev:e,next:null};try{if(t===null){var d=document.createDocumentFragment();d.append(t=Ue())}return g.e=me(()=>a(t,u,h,n)),g.e.prev=e&&e.e,e!==null&&(e.next=g,e.e.next=g.e),g}finally{}}function qe(t,e,i){for(var r=t.next?t.next.e.nodes_start:i,s=e?e.e.nodes_start:i,a=t.e.nodes_start;a!==null&&a!==r;){var o=Ii(a);s.before(a),a=o}}function j(t,e,i){e===null?t.first=i:(e.next=i,e.e.next=i&&i.e),i!==null&&(i.prev=e,i.e.prev=e&&e.e)}function cr(t,e){var i=void 0,r;je(()=>{i!==(i=e())&&(r&&(Te(r),r=null),i&&(r=me(()=>{Nt(()=>i(t))})))})}function qt(t){var e,i,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(i=qt(t[e]))&&(r&&(r+=" "),r+=i)}else for(i in t)t[i]&&(r&&(r+=" "),r+=i);return r}function ur(){for(var t,e,i=0,r="",s=arguments.length;i<s;i++)(t=arguments[i])&&(e=qt(t))&&(r&&(r+=" "),r+=e);return r}function hr(t){return typeof t=="object"?ur(t):t??""}const ft=[...` 	
\r\f \v\uFEFF`];function gr(t,e,i){var r=t==null?"":""+t;if(i){for(var s in i)if(i[s])r=r?r+" "+s:s;else if(r.length)for(var a=s.length,o=0;(o=r.indexOf(s,o))>=0;){var n=o+a;(o===0||ft.includes(r[o-1]))&&(n===r.length||ft.includes(r[n]))?r=(o===0?"":r.substring(0,o))+r.substring(n+1):o=n}}return r===""?null:r}function mt(t,e=!1){var i=e?" !important;":";",r="";for(var s in t){var a=t[s];a!=null&&a!==""&&(r+=" "+s+": "+a+i)}return r}function De(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function dr(t,e){if(e){var i="",r,s;if(Array.isArray(e)?(r=e[0],s=e[1]):r=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,o=0,n=!1,l=[];r&&l.push(...Object.keys(r).map(De)),s&&l.push(...Object.keys(s).map(De));var c=0,u=-1;const C=t.length;for(var h=0;h<C;h++){var g=t[h];if(n?g==="/"&&t[h-1]==="*"&&(n=!1):a?a===g&&(a=!1):g==="/"&&t[h+1]==="*"?n=!0:g==='"'||g==="'"?a=g:g==="("?o++:g===")"&&o--,!n&&a===!1&&o===0){if(g===":"&&u===-1)u=h;else if(g===";"||h===C-1){if(u!==-1){var d=De(t.substring(c,u).trim());if(!l.includes(d)){g!==";"&&h++;var f=t.substring(c,h).trim();i+=" "+f+";"}}c=h+1,u=-1}}}}return r&&(i+=mt(r)),s&&(i+=mt(s,!0)),i=i.trim(),i===""?null:i}return t==null?null:String(t)}function pr(t,e,i,r,s,a){var o=t.__className;if(U||o!==i||o===void 0){var n=gr(i,r,a);(!U||n!==t.getAttribute("class"))&&(n==null?t.removeAttribute("class"):e?t.className=n:t.setAttribute("class",n)),t.__className=i}else if(a&&s!==a)for(var l in a){var c=!!a[l];(s==null||c!==!!s[l])&&t.classList.toggle(l,c)}return a}function $e(t,e={},i,r){for(var s in i){var a=i[s];e[s]!==a&&(i[s]==null?t.style.removeProperty(s):t.style.setProperty(s,a,r))}}function se(t,e,i,r){var s=t.__style;if(U||s!==e){var a=dr(e,r);(!U||a!==t.getAttribute("style"))&&(a==null?t.removeAttribute("style"):t.style.cssText=a),t.__style=e}else r&&(Array.isArray(r)?($e(t,i?.[0],r[0]),$e(t,i?.[1],r[1],"important")):$e(t,i,r));return r}function We(t,e,i=!1){if(t.multiple){if(e==null)return;if(!_t(e))return $i();for(var r of t.options)r.selected=e.includes(vt(r));return}for(r of t.options){var s=vt(r);if(Hi(s,e)){r.selected=!0;return}}(!i||e!==void 0)&&(t.selectedIndex=-1)}function fr(t){var e=new MutationObserver(()=>{We(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ai(()=>{e.disconnect()})}function vt(t){return"__value"in t?t.__value:t.value}const ge=Symbol("class"),ae=Symbol("style"),Dt=Symbol("is custom element"),$t=Symbol("is html");function mr(t){if(U){var e=!1,i=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;ve(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var s=t.checked;ve(t,"checked",null),t.checked=s}}};t.__on_r=i,Ze(i),sr()}}function vr(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function ve(t,e,i,r){var s=Ht(t);U&&(s[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||s[e]!==(s[e]=i)&&(e==="loading"&&(t[Pi]=i),i==null?t.removeAttribute(e):typeof i!="string"&&At(t).includes(e)?t[e]=i:t.setAttribute(e,i))}function yr(t,e,i,r,s=!1,a=!1){if(U&&s&&t.tagName==="INPUT"){var o=t,n=o.type==="checkbox"?"defaultChecked":"defaultValue";n in i||mr(o)}var l=Ht(t),c=l[Dt],u=!l[$t];let h=U&&c;h&&fe(!1);var g=e||{},d=t.tagName==="OPTION";for(var f in e)f in i||(i[f]=null);i.class?i.class=hr(i.class):i[ge]&&(i.class=null),i[ae]&&(i.style??=null);var C=At(t);for(const b in i){let m=i[b];if(d&&b==="value"&&m==null){t.value=t.__value="",g[b]=m;continue}if(b==="class"){var I=t.namespaceURI==="http://www.w3.org/1999/xhtml";pr(t,I,m,r,e?.[ge],i[ge]),g[b]=m,g[ge]=i[ge];continue}if(b==="style"){se(t,m,e?.[ae],i[ae]),g[b]=m,g[ae]=i[ae];continue}var p=g[b];if(!(m===p&&!(m===void 0&&t.hasAttribute(b)))){g[b]=m;var w=b[0]+b[1];if(w!=="$$")if(w==="on"){const x={},L="$$"+b;let N=b.slice(2);var E=Qi(N);if(Fi(N)&&(N=N.slice(0,-7),x.capture=!0),!E&&p){if(m!=null)continue;t.removeEventListener(N,g[L],x),g[L]=null}if(m!=null)if(E)t[`__${N}`]=m,Ke([N]);else{let J=function(O){g[b].call(this,O)};g[L]=ji(N,t,J,x)}else E&&(t[`__${N}`]=void 0)}else if(b==="style")ve(t,b,m);else if(b==="autofocus")rr(t,!!m);else if(!c&&(b==="__value"||b==="value"&&m!=null))t.value=t.__value=m;else if(b==="selected"&&d)vr(t,m);else{var k=b;u||(k=Yi(k));var _=k==="defaultValue"||k==="defaultChecked";if(m==null&&!c&&!_)if(l[b]=null,k==="value"||k==="checked"){let x=t;const L=e===void 0;if(k==="value"){let N=x.defaultValue;x.removeAttribute(k),x.defaultValue=N,x.value=x.__value=L?N:null}else{let N=x.defaultChecked;x.removeAttribute(k),x.defaultChecked=N,x.checked=L?N:!1}}else t.removeAttribute(b);else _||C.includes(k)&&(c||typeof m!="string")?(t[k]=m,k in l&&(l[k]=Bi)):typeof m!="function"&&ve(t,k,m)}}}return h&&fe(!0),g}function Ye(t,e,i=[],r=[],s=[],a,o=!1,n=!1){Wi(s,i,r,l=>{var c=void 0,u={},h=t.nodeName==="SELECT",g=!1;if(je(()=>{var f=e(...l.map(S)),C=yr(t,c,f,a,o,n);g&&h&&"value"in f&&We(t,f.value);for(let p of Object.getOwnPropertySymbols(u))f[p]||Te(u[p]);for(let p of Object.getOwnPropertySymbols(f)){var I=f[p];p.description===Vi&&(!c||I!==c[p])&&(u[p]&&Te(u[p]),u[p]=me(()=>cr(t,()=>I))),C[p]=I}c=C}),h){var d=t;Nt(()=>{We(d,c.value,!0),fr(d)})}g=!0})}function Ht(t){return t.__attributes??={[Dt]:t.nodeName.includes("-"),[$t]:t.namespaceURI===Mi}}var yt=new Map;function At(t){var e=t.getAttribute("is")||t.nodeName,i=yt.get(e);if(i)return i;yt.set(e,i=[]);for(var r,s=t,a=Element.prototype;a!==s;){r=Gi(s);for(var o in r)r[o].set&&i.push(o);s=Ui(s)}return i}var Qe=(t=>(t[t.Degree0=0]="Degree0",t[t.Degree90=1]="Degree90",t[t.Degree180=2]="Degree180",t[t.Degree270=3]="Degree270",t))(Qe||{});function wr(t){return{x:Math.floor(t.x),y:Math.floor(t.y)}}function br(t){return{width:Math.ceil(t.width),height:Math.ceil(t.height)}}function Za(t){return{origin:wr(t.origin),size:br(t.size)}}function Ve(t){const{width:e,height:i}=t;return{width:i,height:e}}function Sr(t,e,i){return t=e%2===0?t:Ve(t),{width:t.width*i,height:t.height*i}}function ja(t){const e=[t.p1.x,t.p2.x,t.p3.x,t.p4.x],i=[t.p1.y,t.p2.y,t.p3.y,t.p4.y];return{origin:{x:Math.min(...e),y:Math.min(...i)},size:{width:Math.max(...e)-Math.min(...e),height:Math.max(...i)-Math.min(...i)}}}function Ka(t){return{p1:{x:t.origin.x,y:t.origin.y},p2:{x:t.origin.x+t.size.width,y:t.origin.y},p3:{x:t.origin.x+t.size.width,y:t.origin.y+t.size.height},p4:{x:t.origin.x,y:t.origin.y+t.size.height}}}function Rr(t,e,i){let r=e.x,s=e.y;switch(i){case 0:r=e.x,s=e.y;break;case 1:r=t.height-e.y,s=e.x;break;case 2:r=t.width-e.x,s=t.height-e.y;break;case 3:r=e.y,s=t.width-e.x;break}return{x:r,y:s}}function Be(t,e){return{x:t.x*e,y:t.y*e}}function Cr(t,e,i,r){return Be(Rr(t,e,i),r)}function Mt(t,e,i){let r=e.origin.x,s=e.origin.y,a=e.size;switch(i){case 0:break;case 1:r=t.height-e.origin.y-e.size.height,s=e.origin.x,a=Ve(e.size);break;case 2:r=t.width-e.origin.x-e.size.width,s=t.height-e.origin.y-e.size.height;break;case 3:r=e.origin.y,s=t.width-e.origin.x-e.size.width,a=Ve(e.size);break}return{origin:{x:r,y:s},size:{width:a.width,height:a.height}}}function Tr(t,e){return{origin:{x:t.origin.x*e,y:t.origin.y*e},size:{width:t.size.width*e,height:t.size.height*e}}}function xr(t,e,i,r){return Tr(Mt(t,e,i),r)}function Fa(t,e,i,r){const s=t.origin.x,a=t.origin.y,o=t.size.width,n=t.size.height,l=i/o,c=r/n,u=i/n,h=r/o;switch(e){case 0:return{a:l,b:0,c:0,d:c,e:-l*s,f:-c*a};case 3:return{a:0,b:-h,c:u,d:0,e:-u*a,f:h*(s+o)};case 2:return{a:-l,b:0,c:0,d:-c,e:l*(s+o),f:c*(a+n)};case 1:return{a:0,b:h,c:-u,d:0,e:u*(a+n),f:-h*s}}}class Je{isEnabled(){return!1}debug(){}info(){}warn(){}error(){}perf(){}}class kr{isEnabled(){return!0}debug(e,i,...r){console.debug(`${e}.${i}`,...r)}info(e,i,...r){console.info(`${e}.${i}`,...r)}warn(e,i,...r){console.warn(`${e}.${i}`,...r)}error(e,i,...r){console.error(`${e}.${i}`,...r)}perf(e,i,r,s,...a){console.info(`${e}.${i}.${r}.${s}`,...a)}}class _r{constructor(e,i){this.logger=e,this.level=i}isEnabled(e){const i={debug:0,info:1,warn:2,error:3};return this.level<=i[e]}debug(e,i,...r){this.level<=0&&this.logger.debug(e,i,...r)}info(e,i,...r){this.level<=1&&this.logger.info(e,i,...r)}warn(e,i,...r){this.level<=2&&this.logger.warn(e,i,...r)}error(e,i,...r){this.level<=3&&this.logger.error(e,i,...r)}perf(e,i,r,s,...a){this.logger.perf(e,i,r,s,...a)}}class Lr{constructor(){}isEnabled(){return!1}debug(e,i,...r){}info(e,i,...r){}warn(e,i,...r){}error(e,i,...r){}perf(e,i,r,s,a,...o){switch(s){case"Begin":globalThis.performance.mark(`${e}.${i}.${r}.${s}.${a}`,{detail:o});break;case"End":globalThis.performance.mark(`${e}.${i}.${r}.${s}.${a}`,{detail:o}),globalThis.performance.measure(`${e}.${i}.${r}.Measure.${a}`,`${e}.${i}.${r}.Begin.${a}`,`${e}.${i}.${r}.End.${a}`);break}}}class Er{constructor(e){this.loggers=e}isEnabled(e){return this.loggers.some(i=>i.isEnabled(e))}debug(e,i,...r){for(const s of this.loggers)s.debug(e,i,...r)}info(e,i,...r){for(const s of this.loggers)s.info(e,i,...r)}warn(e,i,...r){for(const s of this.loggers)s.warn(e,i,...r)}error(e,i,...r){for(const s of this.loggers)s.error(e,i,...r)}perf(e,i,r,s,...a){for(const o of this.loggers)o.perf(e,i,r,s,...a)}}class Ir extends Error{constructor(e){super(`Task aborted: ${JSON.stringify(e)}`),this.name="TaskAbortedError",this.reason=e}}class zr extends Error{constructor(e){super(`Task rejected: ${JSON.stringify(e)}`),this.name="TaskRejectedError",this.reason=e}}class F{constructor(){this.state={stage:0},this.resolvedCallbacks=[],this.rejectedCallbacks=[],this._promise=null,this.progressCbs=[]}toPromise(){return this._promise||(this._promise=new Promise((e,i)=>{this.wait(r=>e(r),r=>{r.type==="abort"?i(new Ir(r.reason)):i(new zr(r.reason))})})),this._promise}wait(e,i){switch(this.state.stage){case 0:this.resolvedCallbacks.push(e),this.rejectedCallbacks.push(i);break;case 1:e(this.state.result);break;case 2:i({type:"reject",reason:this.state.reason});break;case 3:i({type:"abort",reason:this.state.reason});break}}resolve(e){if(this.state.stage===0){this.state={stage:1,result:e};for(const i of this.resolvedCallbacks)try{i(e)}catch{}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}reject(e){if(this.state.stage===0){this.state={stage:2,reason:e};for(const i of this.rejectedCallbacks)try{i({type:"reject",reason:e})}catch{}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}abort(e){if(this.state.stage===0){this.state={stage:3,reason:e};for(const i of this.rejectedCallbacks)try{i({type:"abort",reason:e})}catch{}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}fail(e){e.type==="abort"?this.abort(e.reason):this.reject(e.reason)}onProgress(e){this.progressCbs.push(e)}progress(e){for(const i of this.progressCbs)i(e)}static all(e){const i=new F;if(e.length===0)return i.resolve([]),i;const r=new Array(e.length);let s=0,a=!1;return e.forEach((o,n)=>{o.wait(l=>{a||(r[n]=l,s++,s===e.length&&(a=!0,i.resolve(r)))},l=>{a||(a=!0,l.type==="abort"?i.abort(l.reason):i.reject(l.reason))})}),i}static allSettled(e){const i=new F;if(e.length===0)return i.resolve([]),i;const r=new Array(e.length);let s=0;return e.forEach((a,o)=>{a.wait(n=>{r[o]={status:"resolved",value:n},s++,s===e.length&&i.resolve(r)},n=>{r[o]={status:n.type==="abort"?"aborted":"rejected",reason:n.reason},s++,s===e.length&&i.resolve(r)})}),i}static race(e){const i=new F;if(e.length===0)return i.reject("No tasks provided"),i;let r=!1;return e.forEach(s=>{s.wait(a=>{r||(r=!0,i.resolve(a))},a=>{r||(r=!0,a.type==="abort"?i.abort(a.reason):i.reject(a.reason))})}),i}static withProgress(e,i){const r=F.all(e);if(i){let s=0;e.forEach(a=>{a.wait(()=>{s++,i(s,e.length)},()=>{s++,i(s,e.length)})})}return r}}const Nr="­",Or="​",qr="⁠",Dr="\uFEFF",$r="￾",Hr="￿",Ar=Object.freeze([Nr,Or,qr,Dr,$r,Hr]),Mr=new RegExp(`[${Ar.join("")}]`,"g");function Ya(t){return t.replace(Mr,"")}var Ur=(t=>(t[t.Unknown=0]="Unknown",t[t.XYZ=1]="XYZ",t[t.FitPage=2]="FitPage",t[t.FitHorizontal=3]="FitHorizontal",t[t.FitVertical=4]="FitVertical",t[t.FitRectangle=5]="FitRectangle",t[t.FitBoundingBox=6]="FitBoundingBox",t[t.FitBoundingBoxHorizontal=7]="FitBoundingBoxHorizontal",t[t.FitBoundingBoxVertical=8]="FitBoundingBoxVertical",t))(Ur||{}),Gr=(t=>(t[t.NotSet=0]="NotSet",t[t.True=1]="True",t[t.False=2]="False",t[t.Unknown=3]="Unknown",t))(Gr||{}),D=(t=>(t[t.Unknown=-1]="Unknown",t[t.Courier=0]="Courier",t[t.Courier_Bold=1]="Courier_Bold",t[t.Courier_BoldOblique=2]="Courier_BoldOblique",t[t.Courier_Oblique=3]="Courier_Oblique",t[t.Helvetica=4]="Helvetica",t[t.Helvetica_Bold=5]="Helvetica_Bold",t[t.Helvetica_BoldOblique=6]="Helvetica_BoldOblique",t[t.Helvetica_Oblique=7]="Helvetica_Oblique",t[t.Times_Roman=8]="Times_Roman",t[t.Times_Bold=9]="Times_Bold",t[t.Times_BoldItalic=10]="Times_BoldItalic",t[t.Times_Italic=11]="Times_Italic",t[t.Symbol=12]="Symbol",t[t.ZapfDingbats=13]="ZapfDingbats",t))(D||{}),Ce=(t=>(t[t.Left=0]="Left",t[t.Center=1]="Center",t[t.Right=2]="Right",t))(Ce||{}),q=(t=>(t[t.Normal=0]="Normal",t[t.Multiply=1]="Multiply",t[t.Screen=2]="Screen",t[t.Overlay=3]="Overlay",t[t.Darken=4]="Darken",t[t.Lighten=5]="Lighten",t[t.ColorDodge=6]="ColorDodge",t[t.ColorBurn=7]="ColorBurn",t[t.HardLight=8]="HardLight",t[t.SoftLight=9]="SoftLight",t[t.Difference=10]="Difference",t[t.Exclusion=11]="Exclusion",t[t.Hue=12]="Hue",t[t.Saturation=13]="Saturation",t[t.Color=14]="Color",t[t.Luminosity=15]="Luminosity",t))(q||{}),Wr=(t=>(t[t.Contain=0]="Contain",t[t.Cover=1]="Cover",t[t.Stretch=2]="Stretch",t))(Wr||{}),Vr=(t=>(t[t.Unsupported=0]="Unsupported",t[t.Goto=1]="Goto",t[t.RemoteGoto=2]="RemoteGoto",t[t.URI=3]="URI",t[t.LaunchAppOrOpenFile=4]="LaunchAppOrOpenFile",t))(Vr||{}),Br=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.TEXT=1]="TEXT",t[t.LINK=2]="LINK",t[t.FREETEXT=3]="FREETEXT",t[t.LINE=4]="LINE",t[t.SQUARE=5]="SQUARE",t[t.CIRCLE=6]="CIRCLE",t[t.POLYGON=7]="POLYGON",t[t.POLYLINE=8]="POLYLINE",t[t.HIGHLIGHT=9]="HIGHLIGHT",t[t.UNDERLINE=10]="UNDERLINE",t[t.SQUIGGLY=11]="SQUIGGLY",t[t.STRIKEOUT=12]="STRIKEOUT",t[t.STAMP=13]="STAMP",t[t.CARET=14]="CARET",t[t.INK=15]="INK",t[t.POPUP=16]="POPUP",t[t.FILEATTACHMENT=17]="FILEATTACHMENT",t[t.SOUND=18]="SOUND",t[t.MOVIE=19]="MOVIE",t[t.WIDGET=20]="WIDGET",t[t.SCREEN=21]="SCREEN",t[t.PRINTERMARK=22]="PRINTERMARK",t[t.TRAPNET=23]="TRAPNET",t[t.WATERMARK=24]="WATERMARK",t[t.THREED=25]="THREED",t[t.RICHMEDIA=26]="RICHMEDIA",t[t.XFAWIDGET=27]="XFAWIDGET",t[t.REDACT=28]="REDACT",t))(Br||{}),Pr=(t=>(t[t.Normal=0]="Normal",t[t.Rollover=1]="Rollover",t[t.Down=2]="Down",t))(Pr||{}),Xr=(t=>(t[t.Unknown=-1]="Unknown",t[t.Comment=0]="Comment",t[t.Key=1]="Key",t[t.Note=2]="Note",t[t.Help=3]="Help",t[t.NewParagraph=4]="NewParagraph",t[t.Paragraph=5]="Paragraph",t[t.Insert=6]="Insert",t[t.Graph=7]="Graph",t[t.PushPin=8]="PushPin",t[t.Paperclip=9]="Paperclip",t[t.Tag=10]="Tag",t[t.Speaker=11]="Speaker",t[t.Mic=12]="Mic",t[t.Approved=13]="Approved",t[t.Experimental=14]="Experimental",t[t.NotApproved=15]="NotApproved",t[t.AsIs=16]="AsIs",t[t.Expired=17]="Expired",t[t.NotForPublicRelease=18]="NotForPublicRelease",t[t.Confidential=19]="Confidential",t[t.Final=20]="Final",t[t.Sold=21]="Sold",t[t.Departmental=22]="Departmental",t[t.ForComment=23]="ForComment",t[t.TopSecret=24]="TopSecret",t[t.Draft=25]="Draft",t[t.ForPublicRelease=26]="ForPublicRelease",t))(Xr||{}),Zr=(t=>(t[t.None=0]="None",t[t.Square=1]="Square",t[t.Circle=2]="Circle",t[t.Diamond=3]="Diamond",t[t.OpenArrow=4]="OpenArrow",t[t.ClosedArrow=5]="ClosedArrow",t[t.Butt=6]="Butt",t[t.ROpenArrow=7]="ROpenArrow",t[t.RClosedArrow=8]="RClosedArrow",t[t.Slash=9]="Slash",t[t.Unknown=10]="Unknown",t))(Zr||{}),jr=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.PUSHBUTTON=1]="PUSHBUTTON",t[t.CHECKBOX=2]="CHECKBOX",t[t.RADIOBUTTON=3]="RADIOBUTTON",t[t.COMBOBOX=4]="COMBOBOX",t[t.LISTBOX=5]="LISTBOX",t[t.TEXTFIELD=6]="TEXTFIELD",t[t.SIGNATURE=7]="SIGNATURE",t[t.XFA=8]="XFA",t[t.XFA_CHECKBOX=9]="XFA_CHECKBOX",t[t.XFA_COMBOBOX=10]="XFA_COMBOBOX",t[t.XFA_IMAGEFIELD=11]="XFA_IMAGEFIELD",t[t.XFA_LISTBOX=12]="XFA_LISTBOX",t[t.XFA_PUSHBUTTON=13]="XFA_PUSHBUTTON",t[t.XFA_SIGNATURE=14]="XFA_SIGNATURE",t[t.XFA_TEXTFIELD=15]="XFA_TEXTFIELD",t))(jr||{}),Kr=(t=>(t[t.Color=0]="Color",t[t.InteriorColor=1]="InteriorColor",t))(Kr||{}),Fr=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.SOLID=1]="SOLID",t[t.DASHED=2]="DASHED",t[t.BEVELED=3]="BEVELED",t[t.INSET=4]="INSET",t[t.UNDERLINE=5]="UNDERLINE",t[t.CLOUDY=6]="CLOUDY",t))(Fr||{}),Yr=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.TEXT=1]="TEXT",t[t.PATH=2]="PATH",t[t.IMAGE=3]="IMAGE",t[t.SHADING=4]="SHADING",t[t.FORM=5]="FORM",t))(Yr||{});const Pe=Object.freeze({1:"invisible",2:"hidden",4:"print",8:"noZoom",16:"noRotate",32:"noView",64:"readOnly",128:"locked",256:"toggleNoView"}),Qr=Object.entries(Pe).reduce((t,[e,i])=>(t[i]=Number(e),t),{});function Qa(t){return Object.keys(Pe).filter(e=>(t&e)!==0).map(e=>Pe[e])}function Ja(t){return t.reduce((e,i)=>e|Qr[i],0)}var Jr=(t=>(t[t.None=0]="None",t[t.MatchCase=1]="MatchCase",t[t.MatchWholeWord=2]="MatchWholeWord",t[t.MatchConsecutive=4]="MatchConsecutive",t))(Jr||{}),es=(t=>(t[t.Display=0]="Display",t[t.Print=1]="Print",t))(es||{}),et=(t=>(t[t.Ok=0]="Ok",t[t.Unknown=1]="Unknown",t[t.NotFound=2]="NotFound",t[t.WrongFormat=3]="WrongFormat",t[t.Password=4]="Password",t[t.Security=5]="Security",t[t.PageError=6]="PageError",t[t.XFALoad=7]="XFALoad",t[t.XFALayout=8]="XFALayout",t[t.Cancelled=9]="Cancelled",t[t.Initialization=10]="Initialization",t[t.NotReady=11]="NotReady",t[t.NotSupport=12]="NotSupport",t[t.LoadDoc=13]="LoadDoc",t[t.DocNotOpen=14]="DocNotOpen",t[t.CantCloseDoc=15]="CantCloseDoc",t[t.CantCreateNewDoc=16]="CantCreateNewDoc",t[t.CantImportPages=17]="CantImportPages",t[t.CantCreateAnnot=18]="CantCreateAnnot",t[t.CantSetAnnotRect=19]="CantSetAnnotRect",t[t.CantSetAnnotContent=20]="CantSetAnnotContent",t[t.CantRemoveInkList=21]="CantRemoveInkList",t[t.CantAddInkStoke=22]="CantAddInkStoke",t[t.CantReadAttachmentSize=23]="CantReadAttachmentSize",t[t.CantReadAttachmentContent=24]="CantReadAttachmentContent",t[t.CantFocusAnnot=25]="CantFocusAnnot",t[t.CantSelectText=26]="CantSelectText",t[t.CantSelectOption=27]="CantSelectOption",t[t.CantCheckField=28]="CantCheckField",t[t.CantSetAnnotString=29]="CantSetAnnotString",t))(et||{});class eo{static create(){return new F}static resolve(e){const i=new F;return i.resolve(e),i}static reject(e){const i=new F;return i.reject(e),i}static abort(e){const i=new F;return i.reject(e),i}}function to(t){const e=r=>Math.max(0,Math.min(255,r)),i=r=>e(r).toString(16).padStart(2,"0");return`#${i(t.red)}${i(t.green)}${i(t.blue)}`}function io(t){/^#?[0-9a-f]{3}$/i.test(t)&&(t=t.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"#$1$1$2$2$3$3").toLowerCase());const[,e,i,r]=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(t)??(()=>{throw new Error(`Invalid hex colour: "${t}"`)})();return{red:parseInt(e,16),green:parseInt(i,16),blue:parseInt(r,16)}}function ro(t){return(i=>Math.max(0,Math.min(255,i)))(t)/255}function so(t){return((i,r=255)=>Math.max(0,Math.min(r,i)))(Math.round(t*255))}function ao(t){if(!t?.startsWith("D:")||t.length<16)return;const e=+t.slice(2,6),i=+t.slice(6,8)-1,r=+t.slice(8,10),s=+t.slice(10,12),a=+t.slice(12,14),o=+t.slice(14,16);return new Date(Date.UTC(e,i,r,s,a,o))}function oo(t=new Date){const e=(l,c=2)=>l.toString().padStart(c,"0"),i=t.getUTCFullYear(),r=e(t.getUTCMonth()+1),s=e(t.getUTCDate()),a=e(t.getUTCHours()),o=e(t.getUTCMinutes()),n=e(t.getUTCSeconds());return`D:${i}${r}${s}${a}${o}${n}`}const tt=Object.freeze([{id:Ce.Left,label:"Left",css:"left"},{id:Ce.Center,label:"Center",css:"center"},{id:Ce.Right,label:"Right",css:"right"}]);tt.reduce((t,e)=>(t[e.id]=e,t),{});tt.reduce((t,e)=>(t[e.css]=e.id,t),{});tt.map(t=>({value:t.id,label:t.label}));var Ut=(t=>(t.Courier="Courier",t.Helvetica="Helvetica",t.Times="Times",t.Symbol="Symbol",t.ZapfDingbats="ZapfDingbats",t.Unknown="Unknown",t))(Ut||{});D.Helvetica;const ts={id:D.Helvetica,family:"Helvetica",bold:!1,italic:!1,label:"Helvetica",css:"Helvetica, Arial, sans-serif"},it=Object.freeze([{id:D.Courier,family:"Courier",bold:!1,italic:!1,label:"Courier",css:"Courier, monospace"},{id:D.Courier_Bold,family:"Courier",bold:!0,italic:!1,label:"Courier Bold",css:'"Courier-Bold", Courier, monospace'},{id:D.Courier_BoldOblique,family:"Courier",bold:!0,italic:!0,label:"Courier Bold Oblique",css:'"Courier-BoldOblique", Courier, monospace'},{id:D.Courier_Oblique,family:"Courier",bold:!1,italic:!0,label:"Courier Oblique",css:'"Courier-Oblique", Courier, monospace'},ts,{id:D.Helvetica_Bold,family:"Helvetica",bold:!0,italic:!1,label:"Helvetica Bold",css:'"Helvetica-Bold", Arial, sans-serif'},{id:D.Helvetica_BoldOblique,family:"Helvetica",bold:!0,italic:!0,label:"Helvetica Bold Oblique",css:'"Helvetica-BoldOblique", Arial, sans-serif'},{id:D.Helvetica_Oblique,family:"Helvetica",bold:!1,italic:!0,label:"Helvetica Oblique",css:'"Helvetica-Oblique", Arial, sans-serif'},{id:D.Times_Roman,family:"Times",bold:!1,italic:!1,label:"Times Roman",css:'"Times New Roman", Times, serif'},{id:D.Times_Bold,family:"Times",bold:!0,italic:!1,label:"Times Bold",css:'"Times New Roman Bold", Times, serif'},{id:D.Times_BoldItalic,family:"Times",bold:!0,italic:!0,label:"Times Bold Italic",css:'"Times New Roman Bold Italic", Times, serif'},{id:D.Times_Italic,family:"Times",bold:!1,italic:!0,label:"Times Italic",css:'"Times New Roman Italic", Times, serif'},{id:D.Symbol,family:"Symbol",bold:!1,italic:!1,label:"Symbol",css:"Symbol"},{id:D.ZapfDingbats,family:"ZapfDingbats",bold:!1,italic:!1,label:"Zapf Dingbats",css:"ZapfDingbats"}]);it.reduce((t,e)=>(t[e.id]=e,t),{});const is=new Map;for(const t of it)is.set(`${t.family}_${t.bold}_${t.italic}`,t.id);Object.values(Ut).filter(t=>t!=="Unknown").map(t=>({value:t,label:t}));[...new Set(it.map(t=>t.family))];const rt=Object.freeze([{id:q.Normal,label:"Normal",css:"normal"},{id:q.Multiply,label:"Multiply",css:"multiply"},{id:q.Screen,label:"Screen",css:"screen"},{id:q.Overlay,label:"Overlay",css:"overlay"},{id:q.Darken,label:"Darken",css:"darken"},{id:q.Lighten,label:"Lighten",css:"lighten"},{id:q.ColorDodge,label:"Color Dodge",css:"color-dodge"},{id:q.ColorBurn,label:"Color Burn",css:"color-burn"},{id:q.HardLight,label:"Hard Light",css:"hard-light"},{id:q.SoftLight,label:"Soft Light",css:"soft-light"},{id:q.Difference,label:"Difference",css:"difference"},{id:q.Exclusion,label:"Exclusion",css:"exclusion"},{id:q.Hue,label:"Hue",css:"hue"},{id:q.Saturation,label:"Saturation",css:"saturation"},{id:q.Color,label:"Color",css:"color"},{id:q.Luminosity,label:"Luminosity",css:"luminosity"}]);rt.reduce((t,e)=>(t[e.id]=e,t),{});rt.reduce((t,e)=>(t[e.css]=e.id,t),{});rt.map(t=>({value:t.id,label:t.label}));function wt(t){if(t instanceof Je)return{type:"noop"};if(t instanceof kr)return{type:"console"};if(t instanceof Lr)return{type:"perf"};if(t instanceof _r){const e=t;return{type:"level",config:{level:e.level,logger:wt(e.logger)}}}return t instanceof Er?{type:"all",config:{loggers:t.loggers.map(wt)}}:{type:"noop"}}const rs=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function no(t){return rs.test(t)}function ss(t){var e;if(typeof((e=globalThis.crypto)==null?void 0:e.getRandomValues)=="function")return globalThis.crypto.getRandomValues(new Uint8Array(t));if(typeof require=="function")try{const{randomBytes:r}=require("crypto");return r(t)}catch{}const i=new Uint8Array(t);for(let r=0;r<t;r++)i[r]=Math.floor(Math.random()*256);return i}function lo(){var t;if(typeof((t=globalThis.crypto)==null?void 0:t.randomUUID)=="function")return globalThis.crypto.randomUUID();const e=ss(16);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const i=Array.from(e,r=>r.toString(16).padStart(2,"0")).join("");return`${i.slice(0,8)}-${i.slice(8,12)}-${i.slice(12,16)}-${i.slice(16,20)}-${i.slice(20)}`}function Gt(){}const as="https://cdn.jsdelivr.net/npm/@embedpdf/pdfium@1.4.1/dist/pdfium.wasm",v="WebWorkerEngine",y="Engine";function T(t,e,i){return{id:t,type:"ExecuteRequest",data:{name:e,args:i}}}class R extends F{constructor(e,i){super(),this.worker=e,this.messageId=i}abort(e){super.abort(e),this.worker.postMessage({id:this.messageId,type:"AbortRequest"})}progress(e){super.progress(e)}}const Wt=class Xe{constructor(e,i=new Je){this.worker=e,this.logger=i,this.tasks=new Map,this.handle=r=>{this.logger.debug(v,y,"webworker engine start handling message: ",r.data);try{const s=r.data,a=this.tasks.get(s.id);if(!a)return;switch(s.type){case"ReadyResponse":this.readyTask.resolve(!0);break;case"ExecuteProgress":a.progress(s.data);break;case"ExecuteResponse":{switch(s.data.type){case"result":a.resolve(s.data.value);break;case"error":a.reject(s.data.value.reason);break}this.tasks.delete(s.id)}break}}catch(s){this.logger.error(v,y,"webworker met error when handling message: ",s)}},this.worker.addEventListener("message",this.handle),this.readyTask=new R(this.worker,Xe.readyTaskId),this.tasks.set(Xe.readyTaskId,this.readyTask)}generateRequestId(e){return`${e}.${Date.now()}.${Math.random()}`}initialize(){this.logger.debug(v,y,"initialize");const e=this.generateRequestId("General"),i=new R(this.worker,e),r=T(e,"initialize",[]);return this.proxy(i,r),i}destroy(){this.logger.debug(v,y,"destroy");const e=this.generateRequestId("General"),i=new R(this.worker,e),r=()=>{this.worker.removeEventListener("message",this.handle),this.worker.terminate()};i.wait(r,r);const s=T(e,"destroy",[]);return this.proxy(i,s),i}openDocumentUrl(e,i){this.logger.debug(v,y,"openDocumentUrl",e.url,i);const r=this.generateRequestId(e.id),s=new R(this.worker,r),a=T(r,"openDocumentUrl",[e,i]);return this.proxy(s,a),s}openDocumentBuffer(e,i){this.logger.debug(v,y,"openDocumentBuffer",e,i);const r=this.generateRequestId(e.id),s=new R(this.worker,r),a=T(r,"openDocumentBuffer",[e,i]);return this.proxy(s,a),s}getMetadata(e){this.logger.debug(v,y,"getMetadata",e);const i=this.generateRequestId(e.id),r=new R(this.worker,i),s=T(i,"getMetadata",[e]);return this.proxy(r,s),r}setMetadata(e,i){this.logger.debug(v,y,"setMetadata",e,i);const r=this.generateRequestId(e.id),s=new R(this.worker,r),a=T(r,"setMetadata",[e,i]);return this.proxy(s,a),s}getDocPermissions(e){this.logger.debug(v,y,"getDocPermissions",e);const i=this.generateRequestId(e.id),r=new R(this.worker,i),s=T(i,"getDocPermissions",[e]);return this.proxy(r,s),r}getDocUserPermissions(e){this.logger.debug(v,y,"getDocUserPermissions",e);const i=this.generateRequestId(e.id),r=new R(this.worker,i),s=T(i,"getDocUserPermissions",[e]);return this.proxy(r,s),r}getBookmarks(e){this.logger.debug(v,y,"getBookmarks",e);const i=this.generateRequestId(e.id),r=new R(this.worker,i),s=T(i,"getBookmarks",[e]);return this.proxy(r,s),r}setBookmarks(e,i){this.logger.debug(v,y,"setBookmarks",e,i);const r=this.generateRequestId(e.id),s=new R(this.worker,r),a=T(r,"setBookmarks",[e,i]);return this.proxy(s,a),s}deleteBookmarks(e){this.logger.debug(v,y,"deleteBookmarks",e);const i=this.generateRequestId(e.id),r=new R(this.worker,i),s=T(i,"deleteBookmarks",[e]);return this.proxy(r,s),r}getSignatures(e){this.logger.debug(v,y,"getSignatures",e);const i=this.generateRequestId(e.id),r=new R(this.worker,i),s=T(i,"getSignatures",[e]);return this.proxy(r,s),r}renderPage(e,i,r){this.logger.debug(v,y,"renderPage",e,i,r);const s=this.generateRequestId(e.id),a=new R(this.worker,s),o=T(s,"renderPage",[e,i,r]);return this.proxy(a,o),a}renderPageRect(e,i,r,s){this.logger.debug(v,y,"renderPageRect",e,i,r,s);const a=this.generateRequestId(e.id),o=new R(this.worker,a),n=T(a,"renderPageRect",[e,i,r,s]);return this.proxy(o,n),o}renderPageAnnotation(e,i,r,s){this.logger.debug(v,y,"renderAnnotation",e,i,r,s);const a=this.generateRequestId(e.id),o=new R(this.worker,a),n=T(a,"renderPageAnnotation",[e,i,r,s]);return this.proxy(o,n),o}getAllAnnotations(e){this.logger.debug(v,y,"getAllAnnotations",e);const i=this.generateRequestId(e.id),r=new R(this.worker,i),s=T(i,"getAllAnnotations",[e]);return this.proxy(r,s),r}getPageAnnotations(e,i){this.logger.debug(v,y,"getPageAnnotations",e,i);const r=this.generateRequestId(e.id),s=new R(this.worker,r),a=T(r,"getPageAnnotations",[e,i]);return this.proxy(s,a),s}createPageAnnotation(e,i,r,s){this.logger.debug(v,y,"createPageAnnotations",e,i,r,s);const a=this.generateRequestId(e.id),o=new R(this.worker,a),n=T(a,"createPageAnnotation",[e,i,r,s]);return this.proxy(o,n),o}updatePageAnnotation(e,i,r){this.logger.debug(v,y,"updatePageAnnotation",e,i,r);const s=this.generateRequestId(e.id),a=new R(this.worker,s),o=T(s,"updatePageAnnotation",[e,i,r]);return this.proxy(a,o),a}removePageAnnotation(e,i,r){this.logger.debug(v,y,"removePageAnnotations",e,i,r);const s=this.generateRequestId(e.id),a=new R(this.worker,s),o=T(s,"removePageAnnotation",[e,i,r]);return this.proxy(a,o),a}getPageTextRects(e,i){this.logger.debug(v,y,"getPageTextRects",e,i);const r=this.generateRequestId(e.id),s=new R(this.worker,r),a=T(r,"getPageTextRects",[e,i]);return this.proxy(s,a),s}renderThumbnail(e,i,r){this.logger.debug(v,y,"renderThumbnail",e,i,r);const s=this.generateRequestId(e.id),a=new R(this.worker,s),o=T(s,"renderThumbnail",[e,i,r]);return this.proxy(a,o),a}searchAllPages(e,i,r){this.logger.debug(v,y,"searchAllPages",e,i,r);const s=this.generateRequestId(e.id),a=new R(this.worker,s),o=T(s,"searchAllPages",[e,i,r]);return this.proxy(a,o),a}saveAsCopy(e){this.logger.debug(v,y,"saveAsCopy",e);const i=this.generateRequestId(e.id),r=new R(this.worker,i),s=T(i,"saveAsCopy",[e]);return this.proxy(r,s),r}getAttachments(e){this.logger.debug(v,y,"getAttachments",e);const i=this.generateRequestId(e.id),r=new R(this.worker,i),s=T(i,"getAttachments",[e]);return this.proxy(r,s),r}addAttachment(e,i){this.logger.debug(v,y,"addAttachment",e,i);const r=this.generateRequestId(e.id),s=new R(this.worker,r),a=T(r,"addAttachment",[e,i]);return this.proxy(s,a),s}removeAttachment(e,i){this.logger.debug(v,y,"removeAttachment",e,i);const r=this.generateRequestId(e.id),s=new R(this.worker,r),a=T(r,"removeAttachment",[e,i]);return this.proxy(s,a),s}readAttachmentContent(e,i){this.logger.debug(v,y,"readAttachmentContent",e,i);const r=this.generateRequestId(e.id),s=new R(this.worker,r),a=T(r,"readAttachmentContent",[e,i]);return this.proxy(s,a),s}setFormFieldValue(e,i,r,s){this.logger.debug(v,y,"setFormFieldValue",e,r,s);const a=this.generateRequestId(e.id),o=new R(this.worker,a),n=T(a,"setFormFieldValue",[e,i,r,s]);return this.proxy(o,n),o}flattenPage(e,i,r){this.logger.debug(v,y,"flattenPage",e,i,r);const s=this.generateRequestId(e.id),a=new R(this.worker,s),o=T(s,"flattenPage",[e,i,r]);return this.proxy(a,o),a}extractPages(e,i){this.logger.debug(v,y,"extractPages",e);const r=this.generateRequestId(e.id),s=new R(this.worker,r),a=T(r,"extractPages",[e,i]);return this.proxy(s,a),s}redactTextInRects(e,i,r,s){this.logger.debug(v,y,"redactTextInRects",e,i,r,s);const a=this.generateRequestId(e.id),o=new R(this.worker,a),n=T(a,"redactTextInRects",[e,i,r,s]);return this.proxy(o,n),o}extractText(e,i){this.logger.debug(v,y,"extractText",e);const r=this.generateRequestId(e.id),s=new R(this.worker,r),a=T(r,"extractText",[e,i]);return this.proxy(s,a),s}getTextSlices(e,i){this.logger.debug(v,y,"getTextSlices",e,i);const r=this.generateRequestId(e.id),s=new R(this.worker,r),a=T(r,"getTextSlices",[e,i]);return this.proxy(s,a),s}getPageGlyphs(e,i){this.logger.debug(v,y,"getPageGlyphs",e,i);const r=this.generateRequestId(e.id),s=new R(this.worker,r),a=T(r,"getPageGlyphs",[e,i]);return this.proxy(s,a),s}getPageGeometry(e,i){this.logger.debug(v,y,"getPageGeometry",e,i);const r=this.generateRequestId(e.id),s=new R(this.worker,r),a=T(r,"getPageGeometry",[e,i]);return this.proxy(s,a),s}merge(e){this.logger.debug(v,y,"merge",e);const i=e.map(o=>o.id).join("."),r=this.generateRequestId(i),s=new R(this.worker,r),a=T(r,"merge",[e]);return this.proxy(s,a),s}mergePages(e){this.logger.debug(v,y,"mergePages",e);const i=this.generateRequestId(e.map(a=>a.docId).join(".")),r=new R(this.worker,i),s=T(i,"mergePages",[e]);return this.proxy(r,s),r}preparePrintDocument(e,i){this.logger.debug(v,y,"preparePrintDocument",e,i);const r=this.generateRequestId(e.id),s=new R(this.worker,r),a=T(r,"preparePrintDocument",[e,i]);return this.proxy(s,a),s}closeDocument(e){this.logger.debug(v,y,"closeDocument",e);const i=this.generateRequestId(e.id),r=new R(this.worker,i),s=T(i,"closeDocument",[e]);return this.proxy(r,s),r}closeAllDocuments(){this.logger.debug(v,y,"closeAllDocuments");const e=this.generateRequestId("closeAllDocuments"),i=new R(this.worker,e),r=T(e,"closeAllDocuments",[]);return this.proxy(i,r),i}proxy(e,i,r=[]){this.logger.debug(v,y,"send request to worker",e,i,r),this.logger.perf(v,y,`${i.data.name}`,"Begin",i.id),this.readyTask.wait(()=>{this.worker.postMessage(i,r),e.wait(()=>{this.logger.perf(v,y,`${i.data.name}`,"End",i.id)},()=>{this.logger.perf(v,y,`${i.data.name}`,"End",i.id)}),this.tasks.set(i.id,e)},()=>{this.logger.perf(v,y,`${i.data.name}`,"End",i.id),e.reject({code:et.Initialization,message:"worker initialization failed"})})}};Wt.readyTaskId="0";let co=Wt;function os(t){const{wasmUrl:e=as,worker:i=!0,logger:r}={},s=ee({engine:null,isLoading:!0,error:null});let a=oe(null);return typeof window<"u"&&V(()=>{let n=!1;return(async()=>{try{const{createPdfiumEngine:l}=i?await dt(()=>import("./BLDnfsZ3.js"),[],import.meta.url):await dt(()=>import("./zma2LQA8.js"),[],import.meta.url),c=await l(e,r);te(a,c,!0),c.initialize().wait(()=>{s.engine=c,s.isLoading=!1},u=>{s.error=new Error(u.reason.message),s.isLoading=!1})}catch(l){n||(s.error=l,s.isLoading=!1)}})(),()=>{var l,c;n=!0,(c=(l=S(a))==null?void 0:l.closeAllDocuments)==null||c.call(l).wait(()=>{var u,h;(h=(u=S(a))==null?void 0:u.destroy)==null||h.call(u),te(a,null)},Gt)}}),s}class bt{constructor(){this.dependencyGraph=new Map}addNode(e,i=[]){this.dependencyGraph.set(e,new Set(i))}hasCircularDependencies(){const e=new Set,i=new Set,r=s=>{e.add(s),i.add(s);const a=this.dependencyGraph.get(s)||new Set;for(const o of a)if(e.has(o)){if(i.has(o))return!0}else if(r(o))return!0;return i.delete(s),!1};for(const s of this.dependencyGraph.keys())if(!e.has(s)&&r(s))return!0;return!1}resolveLoadOrder(){if(this.hasCircularDependencies())throw new Error("Circular dependencies detected");const e=[],i=new Set,r=new Set,s=a=>{if(r.has(a))throw new Error("Circular dependency");if(i.has(a))return;r.add(a);const o=this.dependencyGraph.get(a)||new Set;for(const n of o)s(n);r.delete(a),i.add(a),e.push(a)};for(const a of this.dependencyGraph.keys())i.has(a)||s(a);return e}}class H extends Error{constructor(e){super(e),this.name="PluginRegistrationError"}}class le extends Error{constructor(e){super(e),this.name="PluginNotFoundError"}}class ns extends Error{constructor(e){super(e),this.name="CircularDependencyError"}}class ls extends Error{constructor(e){super(e),this.name="PluginConfigurationError"}}class cs{constructor(e,i){this.store=e,this.pluginId=i}getState(){return this.store.getState().plugins[this.pluginId]}dispatch(e){return this.store.dispatchToPlugin(this.pluginId,e)}subscribeToState(e){return this.store.subscribeToPlugin(this.pluginId,(i,r,s)=>{e(i,r,s)})}onAction(e,i){return this.store.onAction(e,(r,s,a)=>{i(r,s.plugins[this.pluginId],a.plugins[this.pluginId])})}}const st="LOAD_DOCUMENT",Vt="REFRESH_DOCUMENT",us="REFRESH_PAGES",we="SET_DOCUMENT",Bt="SET_DOCUMENT_ERROR",ke="SET_SCALE",_e="SET_ROTATION",Le="SET_PAGES",hs=[st,Vt,we,Bt,ke,_e,Le],gs=()=>({type:st}),ds=t=>({type:we,payload:t}),ps=t=>({type:ke,payload:t});class fs{constructor(e,i){this.initialCoreState=i,this.pluginReducers={},this.listeners=[],this.pluginListeners={},this.isDispatching=!1,this.state={core:i,plugins:{}},this.coreReducer=e}addPluginReducer(e,i,r){this.state.plugins[e]=r,this.pluginReducers[e]=i}dispatchToCore(e){if(!this.coreReducer)return this.getState();if(this.isDispatching)throw new Error("Reducers may not dispatch actions. To trigger cascading actions, dispatch from a listener callback instead.");const i=this.getState();try{this.isDispatching=!0,this.state.core=this.coreReducer(this.state.core,e)}finally{this.isDispatching=!1}return this.listeners.forEach(r=>{const s=this.getState();r(e,s,i)}),this.getState()}dispatchToPlugin(e,i,r=!0){if(this.isDispatching)throw new Error("Reducers may not dispatch actions. To trigger cascading actions, dispatch from a listener callback instead.");const s=this.getState(),a=this.pluginReducers[e];if(!a)return s.plugins[e];const o=s.plugins[e];try{this.isDispatching=!0;const n=a(o,i);this.state.plugins[e]=n}finally{this.isDispatching=!1}return r&&this.listeners.forEach(n=>{const l=this.getState();n(i,l,s)}),this.pluginListeners[e]&&this.pluginListeners[e].forEach(n=>{const l=this.getState().plugins[e];n(i,l,o)}),this.getState().plugins[e]}dispatch(e){if(this.isDispatching)throw new Error("Reducers may not dispatch actions. To trigger cascading actions, dispatch from a listener callback instead.");const i=this.getState();try{this.isDispatching=!0,this.isCoreAction(e)&&(this.state.core=this.coreReducer(this.state.core,e));for(const r in this.pluginReducers){const s=this.pluginReducers[r],a=i.plugins[r];s&&(this.state.plugins[r]=s(a,e))}}finally{this.isDispatching=!1}return this.listeners.forEach(r=>{const s=this.getState();r(e,s,i)}),this.getState()}getState(){if(this.isDispatching)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return{core:{...this.state.core},plugins:{...this.state.plugins}}}subscribe(e){if(this.isDispatching)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state.");return this.listeners.push(e),()=>{if(this.isDispatching)throw new Error("You may not unsubscribe from a store listener while the reducer is executing.");this.listeners=this.listeners.filter(i=>i!==e)}}subscribeToPlugin(e,i){if(!(e in this.state.plugins))throw new Error(`Plugin state not found for plugin "${e}". Did you forget to call addPluginReducer?`);if(this.isDispatching)throw new Error("You may not call store.subscribeToPlugin() while the reducer is executing.");return this.pluginListeners[e]||(this.pluginListeners[e]=[]),this.pluginListeners[e].push(i),()=>{if(this.isDispatching)throw new Error("You may not unsubscribe from a store listener while the reducer is executing.");this.pluginListeners[e]=this.pluginListeners[e].filter(r=>r!==i),this.pluginListeners[e].length===0&&delete this.pluginListeners[e]}}onAction(e,i){return this.subscribe((r,s,a)=>{r.type===e&&i(r,s,a)})}getPluginStore(e){if(!(e in this.state.plugins))throw new Error(`Plugin state not found for plugin "${e}". Did you forget to call addPluginReducer?`);return new cs(this,e)}isCoreAction(e){return hs.includes(e.type)}destroy(){var e,i;this.listeners.length=0;for(const r in this.pluginListeners)(i=(e=this.pluginListeners[r])==null?void 0:e.splice)==null||i.call(e,0);this.pluginListeners={},this.pluginReducers={},this.state.plugins={},this.state.core={...this.initialCoreState}}}const ms=t=>({scale:t?.scale??1,rotation:t?.rotation??Qe.Degree0,document:null,pages:[],loading:!1,error:null}),pe=t=>t.pages.map(e=>e.map(i=>({...i,rotatedSize:Sr(i.size,t.rotation,1)}))),vs=(t,e)=>{switch(e.type){case st:return{...t,loading:!0,error:null};case we:return{...t,document:e.payload,pages:e.payload.pages.map(i=>[i]),loading:!1,error:null};case Vt:return{...t,document:e.payload,pages:e.payload.pages.map(i=>[i]),loading:!1,error:null};case _e:return{...t,rotation:e.payload};case Le:return{...t,pages:e.payload};case Bt:return{...t,loading:!1,error:e.payload};case ke:return{...t,scale:e.payload};default:return t}};class ys{constructor(e,i){this.plugins=new Map,this.manifests=new Map,this.capabilities=new Map,this.status=new Map,this.configurations=new Map,this.engineInitialized=!1,this.initPromise=null,this.pendingRegistrations=[],this.processingRegistrations=[],this.initialized=!1,this.isInitializing=!1,this.pluginsReadyPromise=null,this.destroyed=!1,this.resolver=new bt,this.engine=e,this.initialCoreState=ms(i),this.store=new fs(vs,this.initialCoreState),this.logger=i?.logger??new Je}getLogger(){return this.logger}async ensureEngineInitialized(){this.engineInitialized||(this.engine.initialize?(await this.engine.initialize().toPromise(),this.engineInitialized=!0):this.engineInitialized=!0)}registerPlugin(e,i){if(this.initialized&&!this.isInitializing)throw new H("Cannot register plugins after initialization");this.validateManifest(e.manifest),this.store.addPluginReducer(e.manifest.id,e.reducer,typeof e.initialState=="function"?e.initialState(this.initialCoreState,{...e.manifest.defaultConfig,...i}):e.initialState),this.pendingRegistrations.push({package:e,config:i})}getStore(){return this.store}getEngine(){return this.engine}pluginsReady(){return this.pluginsReadyPromise?this.pluginsReadyPromise:(this.pluginsReadyPromise=(async()=>{this.initialized||await this.initialize();const e=Array.from(this.plugins.values()).map(i=>typeof i.ready=="function"?i.ready():Promise.resolve());await Promise.all(e)})(),this.pluginsReadyPromise)}async initialize(){if(this.destroyed)throw new H("Registry has been destroyed");return this.initPromise?this.initPromise:(this.initPromise=(async()=>{var e;if(this.initialized)throw new H("Registry is already initialized");this.isInitializing=!0;try{if(await this.ensureEngineInitialized(),this.destroyed)return;for(;this.pendingRegistrations.length>0;){if(this.destroyed)return;this.processingRegistrations=[...this.pendingRegistrations],this.pendingRegistrations=[];for(const r of this.processingRegistrations){const s=new Set,a=[...r.package.manifest.requires,...r.package.manifest.optional];for(const o of a){const n=this.processingRegistrations.find(l=>l.package.manifest.provides.includes(o));n&&s.add(n.package.manifest.id)}this.resolver.addNode(r.package.manifest.id,[...s])}const i=this.resolver.resolveLoadOrder();for(const r of i){const s=this.processingRegistrations.find(a=>a.package.manifest.id===r);await this.initializePlugin(s.package.manifest,s.package.create,s.config)}this.processingRegistrations=[],this.resolver=new bt}for(const i of this.plugins.values())await((e=i.postInitialize)==null?void 0:e.call(i).catch(r=>{console.error(`Error in postInitialize for plugin ${i.id}`,r),this.status.set(i.id,"error")}));this.initialized=!0}catch(i){throw i instanceof Error?new ns(`Failed to resolve plugin dependencies: ${i.message}`):i}finally{this.isInitializing=!1}})(),this.initPromise)}async initializePlugin(e,i,r){const s={...e.defaultConfig,...r};this.validateConfig(e.id,s,e.defaultConfig);const a=i(this,s);this.validatePlugin(a);for(const o of e.requires)if(!this.capabilities.has(o))throw new H(`Missing required capability: ${o} for plugin ${e.id}`);for(const o of e.optional)this.capabilities.has(o)&&this.logger.debug("PluginRegistry","OptionalCapability",`Optional capability ${o} is available for plugin ${e.id}`);this.logger.debug("PluginRegistry","InitializePlugin",`Initializing plugin ${e.id}`,{provides:e.provides});for(const o of e.provides){if(this.capabilities.has(o))throw new H(`Capability ${o} is already provided by plugin ${this.capabilities.get(o)}`);this.capabilities.set(o,e.id)}this.plugins.set(e.id,a),this.manifests.set(e.id,e),this.status.set(e.id,"registered"),this.configurations.set(e.id,s);try{a.initialize&&await a.initialize(s),this.status.set(e.id,"active"),this.logger.info("PluginRegistry","PluginInitialized",`Plugin ${e.id} initialized successfully`)}catch(o){throw this.plugins.delete(e.id),this.manifests.delete(e.id),this.logger.error("PluginRegistry","InitializationFailed",`Plugin ${e.id} initialization failed`,{provides:e.provides,error:o}),e.provides.forEach(n=>this.capabilities.delete(n)),o}}getPluginConfig(e){const i=this.configurations.get(e);if(!i)throw new le(`Configuration for plugin ${e} not found`);return i}validateConfig(e,i,r){const a=Object.keys(r).filter(o=>!i.hasOwnProperty(o));if(a.length>0)throw new ls(`Missing required configuration keys for plugin ${e}: ${a.join(", ")}`)}async updatePluginConfig(e,i){const r=this.getPlugin(e);if(!r)throw new le(`Plugin ${e} not found`);const s=this.manifests.get(e),a=this.configurations.get(e);if(!s||!a)throw new le(`Plugin ${e} not found`);const o={...a,...i};this.validateConfig(e,o,s.defaultConfig),this.configurations.set(e,o),r.initialize&&await r.initialize(o)}registerPluginBatch(e){for(const i of e)this.registerPlugin(i.package,i.config)}async unregisterPlugin(e){const i=this.plugins.get(e);if(!i)throw new le(`Plugin ${e} is not registered`);const r=this.manifests.get(e);if(!r)throw new le(`Manifest for plugin ${e} not found`);for(const[s,a]of this.manifests.entries()){if(s===e)continue;if([...a.requires,...a.optional].some(n=>r.provides.includes(n)))throw new H(`Cannot unregister plugin ${e}: plugin ${s} depends on it`)}try{i.destroy&&await i.destroy();for(const s of r.provides)this.capabilities.delete(s);this.plugins.delete(e),this.manifests.delete(e),this.status.delete(e)}catch(s){throw s instanceof Error?new Error(`Failed to unregister plugin ${e}: ${s.message}`):s}}getPlugin(e){const i=this.plugins.get(e);return i||null}getCapabilityProvider(e){const i=this.capabilities.get(e);return i?this.getPlugin(i):null}hasCapability(e){return this.capabilities.has(e)}getAllPlugins(){return Array.from(this.plugins.values())}getPluginStatus(e){const i=this.status.get(e);if(!i)throw new le(`Plugin ${e} not found`);return i}validatePlugin(e){if(!e.id)throw new H("Plugin must have an id")}validateManifest(e){if(!e.id)throw new H("Manifest must have an id");if(!e.name)throw new H("Manifest must have a name");if(!e.version)throw new H("Manifest must have a version");if(!Array.isArray(e.provides))throw new H("Manifest must have a provides array");if(!Array.isArray(e.requires))throw new H("Manifest must have a requires array");if(!Array.isArray(e.optional))throw new H("Manifest must have an optional array")}isDestroyed(){return this.destroyed}async destroy(){var e;if(this.destroyed)throw new H("Registry has already been destroyed");this.destroyed=!0;try{await this.initPromise}catch{}for(const i of Array.from(this.plugins.values()).reverse())await((e=i.destroy)==null?void 0:e.call(i));this.store.destroy(),this.plugins.clear(),this.manifests.clear(),this.capabilities.clear(),this.status.clear(),this.pendingRegistrations.length=0,this.processingRegistrations.length=0}}function de(t,e){return{package:t,config:e}}function ws(t){return"autoMountElements"in t&&typeof t.autoMountElements=="function"}class be{constructor(e,i){if(this.id=e,this.registry=i,this.cooldownActions={},this.debouncedTimeouts={},this.unsubscribeFromState=null,this.unsubscribeFromCoreStore=null,e!==this.constructor.id)throw new Error(`Plugin ID mismatch: ${e} !== ${this.constructor.id}`);this.engine=this.registry.getEngine(),this.logger=this.registry.getLogger(),this.coreStore=this.registry.getStore(),this.pluginStore=this.coreStore.getPluginStore(this.id),this.unsubscribeFromState=this.pluginStore.subscribeToState((r,s,a)=>{this.onStoreUpdated(a,s)}),this.unsubscribeFromCoreStore=this.coreStore.subscribe((r,s,a)=>{this.onCoreStoreUpdated(a,s)}),this.readyPromise=new Promise(r=>{this.readyResolve=r}),this.readyResolve()}provides(){if(!this._capability){const e=this.buildCapability();this._capability=Object.freeze(e)}return this._capability}get state(){return this.pluginStore.getState()}get coreState(){return this.coreStore.getState()}getState(){return this.pluginStore.getState()}getCoreState(){return this.coreStore.getState()}dispatchCoreAction(e){return this.coreStore.dispatchToCore(e)}dispatchToAllPlugins(e){return this.coreStore.dispatch(e)}dispatch(e){return this.pluginStore.dispatch(e)}cooldownDispatch(e,i=100){const r=Date.now(),s=this.cooldownActions[e.type]||0;return r-s>=i?(this.cooldownActions[e.type]=r,this.dispatch(e),!0):!1}debouncedDispatch(e,i=100){const r=e.type;this.debouncedTimeouts[r]&&clearTimeout(this.debouncedTimeouts[r]),this.debouncedTimeouts[r]=setTimeout(()=>{this.dispatch(e),delete this.debouncedTimeouts[r]},i)}cancelDebouncedDispatch(e){this.debouncedTimeouts[e]&&(clearTimeout(this.debouncedTimeouts[e]),delete this.debouncedTimeouts[e])}subscribe(e){return this.pluginStore.subscribeToState(e)}subscribeToCoreStore(e){return this.coreStore.subscribe(e)}onStoreUpdated(e,i){}onCoreStoreUpdated(e,i){}destroy(){Object.values(this.debouncedTimeouts).forEach(e=>{clearTimeout(e)}),this.debouncedTimeouts={},this.unsubscribeFromState&&(this.unsubscribeFromState(),this.unsubscribeFromState=null),this.unsubscribeFromCoreStore&&(this.unsubscribeFromCoreStore(),this.unsubscribeFromCoreStore=null)}ready(){return this.readyPromise}markReady(){this.readyResolve()}resetReady(){this.readyPromise=new Promise(e=>{this.readyResolve=e})}}class bs{constructor(e,i){this.handler=e,this.options=i,this.lastRun=0,this.handle=r=>{this.options.mode==="debounce"?this.debounce(r):this.throttle(r)}}debounce(e){this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.handler(e),this.timeoutId=void 0},this.options.wait)}throttle(e){if(this.options.mode==="debounce")return;const i=Date.now(),r=this.options.throttleMode||"leading-trailing";i-this.lastRun>=this.options.wait&&(r==="leading-trailing"&&this.handler(e),this.lastRun=i),this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.handler(e),this.lastRun=Date.now(),this.timeoutId=void 0},this.options.wait-(i-this.lastRun))}destroy(){this.timeoutId&&window.clearTimeout(this.timeoutId)}}function xe(t,e,i){return t<e?e:t>i?i:t}function ye(t,e,i){if(t===e)return!0;if(t==null||e==null)return t===e;const r=typeof t;if(r!==typeof e)return!1;if(r==="object"){i||(i=new Set);const a=Ss(t,e);if(i.has(a))return!0;i.add(a);const o=Array.isArray(t),n=Array.isArray(e);return o&&n?Cs(t,e,i):!o&&!n?Ts(t,e,i):!1}return!1}function Ss(t,e){return`${St(t)}__${St(e)}`}let Rs=0;const He=new WeakMap;function St(t){return He.has(t)||He.set(t,++Rs),He.get(t)}function Cs(t,e,i){if(t.length!==e.length)return!1;const r=new Array(e.length).fill(!1);e:for(let s=0;s<t.length;s++){const a=t[s];for(let o=0;o<e.length;o++)if(!r[o]&&ye(a,e[o],i)){r[o]=!0;continue e}return!1}return!0}function Ts(t,e,i){const r=Object.keys(t).sort(),s=Object.keys(e).sort();if(r.length!==s.length)return!1;for(let a=0;a<r.length;a++)if(r[a]!==s[a])return!1;for(const a of r){const o=t[a],n=e[a];if(!ye(o,n,i))return!1}return!0}function Ee(){const t=new Set;return{emit:(i=void 0)=>t.forEach(r=>r(i)),on:i=>(t.add(i),()=>t.delete(i)),off:i=>t.delete(i),clear:()=>t.clear()}}function M(t,e=ye){const i=new Set,r=new Map;let s=t;const a=n=>i.forEach(l=>l(n)),o=(n,l)=>{let c=n,u=()=>{};if(l){const h=new bs(n,l);c=h.handle,u=()=>h.destroy(),r.set(n,{wrapped:c,destroy:u})}return s!==void 0&&c(s),i.add(c),()=>{i.delete(c),u(),r.delete(n)}};return{get value(){return s},emit(n=void 0){(s===void 0||!e(s,n))&&(s=n,a(n))},on:o,off(n){const l=r.get(n);l?(i.delete(l.wrapped),l.destroy(),r.delete(n)):i.delete(n)},clear(){i.clear(),r.forEach(n=>n.destroy()),r.clear()},select(n,l=ye){return(c,u)=>{let h;if(s!==void 0){const g=n(s);h=g,c(g)}return o(g=>{const d=n(g);(h===void 0||!l(h,d))&&(h=d,c(d))},u)}}}}class xs{constructor(e){this.autoMountElements=[],this.package=e}addUtility(e){return this.autoMountElements.push({component:e,type:"utility"}),this}addWrapper(e){return this.autoMountElements.push({component:e,type:"wrapper"}),this}build(){return{...this.package,autoMountElements:()=>this.autoMountElements}}}function ks(t){return new xs(t)}const X=ee({registry:null,isInitializing:!0,pluginsReady:!1}),_s=()=>X;function Ie(t){const{registry:e}=X,i=ee({plugin:null,isLoading:!0,ready:new Promise(()=>{})});if(e===null)return i;const r=e.getPlugin(t);if(!r)throw new Error(`Plugin ${t} not found`);return i.plugin=r,i.isLoading=!1,i.ready=r.ready(),i}function ze(t){const e=Ie(t),i=ee({provides:null,isLoading:!0,ready:new Promise(()=>{})});return V(()=>{if(!e.plugin){i.provides=null,i.isLoading=e.isLoading,i.ready=e.ready;return}if(!e.plugin.provides)throw new Error(`Plugin ${t} does not provide a capability`);i.provides=e.plugin.provides(),i.isLoading=e.isLoading,i.ready=e.ready}),i}function Ls(){const{registry:t}=_s(),e=ee({coreState:null});return V(()=>{if(!t)return;const i=t.getStore();return e.coreState=i.getState().core,i.subscribe((r,s,a)=>{i.isCoreAction(r)&&!ye(s.core,a.core)&&(e.coreState=s.core)})}),e}function Pt(t,e){Y(e,!0);var i=G(),r=$(i);{var s=o=>{const n=ce(()=>e.wrappers[0]);var l=G(),c=$(l);Ge(c,()=>S(n),(u,h)=>{h(u,{children:(g,d)=>{{let f=ce(()=>e.wrappers.slice(1));Pt(g,{get wrappers(){return S(f)},children:(C,I)=>{var p=G(),w=$(p);ie(w,()=>e.children??he),z(C,p)},$$slots:{default:!0}})}},$$slots:{default:!0}})}),z(o,l)},a=o=>{const n=ce(()=>e.wrappers[0]);var l=G(),c=$(l);Ge(c,()=>S(n),(u,h)=>{h(u,{children:(g,d)=>{var f=G(),C=$(f);ie(C,()=>e.children??he),z(g,f)},$$slots:{default:!0}})}),z(o,l)};ne(r,o=>{e.wrappers.length>1?o(s):o(a,!1)})}z(t,i),Q()}var Es=P("<!> <!>",1);function Is(t,e){Y(e,!0);let i=oe(ee([])),r=oe(ee([]));V(()=>{var c;const u=[],h=[];for(const g of e.plugins){const d=g.package;if(ws(d)){const f=((c=d.autoMountElements)==null?void 0:c.call(d))??[];for(const C of f)C.type==="utility"?u.push(C.component):C.type==="wrapper"&&h.push(C.component)}}te(i,u,!0),te(r,h,!0)});var s=Es(),a=$(s);{var o=c=>{Pt(c,{get wrappers(){return S(r)},get children(){return e.children}})},n=c=>{var u=G(),h=$(u);ie(h,()=>e.children??he),z(c,u)};ne(a,c=>{S(r).length>0?c(o):c(n,!1)})}var l=Z(a,2);Re(l,19,()=>S(i),(c,u)=>`utility-${u}`,(c,u)=>{var h=G(),g=$(h);Ge(g,()=>S(u),(d,f)=>{f(d,{})}),z(c,h)}),z(t,s),Q()}function zs(t,e){Y(e,!0);let i=tr(e,"autoMountDomElements",3,!0),r=e.onInitialized;V(()=>{e.onInitialized&&(r=e.onInitialized)}),V(()=>{if(e.engine||e.engine&&e.plugins){const l=new ys(e.engine,{logger:e.logger});return l.registerPluginBatch(e.plugins),(async()=>{await l.initialize(),!l.isDestroyed()&&(await r?.(l),!l.isDestroyed()&&(l.pluginsReady().then(()=>{l.isDestroyed()||(X.pluginsReady=!0)}),X.registry=l,X.isInitializing=!1))})().catch(console.error),()=>{l.destroy(),X.registry=null,X.isInitializing=!1,X.pluginsReady=!1}}});var s=G(),a=$(s);{var o=l=>{Is(l,{get plugins(){return e.plugins},children:(c,u)=>{var h=G(),g=$(h);ie(g,()=>e.children,()=>X),z(c,h)},$$slots:{default:!0}})},n=l=>{var c=G(),u=$(c);ie(u,()=>e.children,()=>X),z(l,c)};ne(a,l=>{X.pluginsReady&&i()?l(o):l(n,!1)})}z(t,s),Q()}const Xt="viewport",Ns={id:Xt,name:"Viewport Plugin",version:"1.0.0",provides:["viewport"],requires:[],optional:[],defaultConfig:{enabled:!0,viewportGap:10,scrollEndDelay:300}},Zt="SET_VIEWPORT_METRICS",jt="SET_VIEWPORT_SCROLL_METRICS",Kt="SET_VIEWPORT_GAP",Ft="SET_SCROLL_ACTIVITY",Yt="SET_SMOOTH_SCROLL_ACTIVITY";function Os(t){return{type:Kt,payload:t}}function qs(t){return{type:Zt,payload:t}}function Ds(t){return{type:jt,payload:t}}function $s(t){return{type:Ft,payload:t}}function Rt(t){return{type:Yt,payload:t}}const Qt={viewportGap:0,viewportMetrics:{width:0,height:0,scrollTop:0,scrollLeft:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0,relativePosition:{x:0,y:0}},isScrolling:!1,isSmoothScrolling:!1},Hs=(t=Qt,e)=>{switch(e.type){case Kt:return{...t,viewportGap:e.payload};case Zt:return{...t,viewportMetrics:{width:e.payload.width,height:e.payload.height,scrollTop:e.payload.scrollTop,scrollLeft:e.payload.scrollLeft,clientWidth:e.payload.clientWidth,clientHeight:e.payload.clientHeight,scrollWidth:e.payload.scrollWidth,scrollHeight:e.payload.scrollHeight,relativePosition:{x:e.payload.scrollWidth<=e.payload.clientWidth?0:e.payload.scrollLeft/(e.payload.scrollWidth-e.payload.clientWidth),y:e.payload.scrollHeight<=e.payload.clientHeight?0:e.payload.scrollTop/(e.payload.scrollHeight-e.payload.clientHeight)}}};case jt:return{...t,viewportMetrics:{...t.viewportMetrics,scrollTop:e.payload.scrollTop,scrollLeft:e.payload.scrollLeft},isScrolling:!0};case Ft:return{...t,isScrolling:e.payload};case Yt:return{...t,isSmoothScrolling:e.payload};default:return t}},Jt=class extends be{constructor(e,i,r){super(e,i),this.id=e,this.viewportResize$=M(),this.viewportMetrics$=M(),this.scrollMetrics$=M(),this.scrollReq$=Ee(),this.scrollActivity$=M(),this.rectProvider=null,r.viewportGap&&this.dispatch(Os(r.viewportGap)),this.scrollEndDelay=r.scrollEndDelay||100}buildCapability(){return{getViewportGap:()=>this.state.viewportGap,getMetrics:()=>this.state.viewportMetrics,getBoundingRect:()=>{var e;return((e=this.rectProvider)==null?void 0:e.call(this))??{origin:{x:0,y:0},size:{width:0,height:0}}},scrollTo:e=>this.scrollTo(e),isScrolling:()=>this.state.isScrolling,isSmoothScrolling:()=>this.state.isSmoothScrolling,onScrollChange:this.scrollMetrics$.on,onViewportChange:this.viewportMetrics$.on,onViewportResize:this.viewportResize$.on,onScrollActivity:this.scrollActivity$.on}}setViewportResizeMetrics(e){this.registry.isDestroyed()||(this.dispatch(qs(e)),this.viewportResize$.emit(this.state.viewportMetrics))}setViewportScrollMetrics(e){this.registry.isDestroyed()||(e.scrollTop!==this.state.viewportMetrics.scrollTop||e.scrollLeft!==this.state.viewportMetrics.scrollLeft)&&(this.dispatch(Ds(e)),this.bumpScrollActivity(),this.scrollMetrics$.emit({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}))}onScrollRequest(e){return this.scrollReq$.on(e)}registerBoundingRectProvider(e){this.rectProvider=e}bumpScrollActivity(){this.debouncedDispatch($s(!1),this.scrollEndDelay),this.debouncedDispatch(Rt(!1),this.scrollEndDelay)}scrollTo(e){const{x:i,y:r,center:s,behavior:a="auto"}=e;if(a==="smooth"&&this.dispatch(Rt(!0)),s){const o=this.state.viewportMetrics,n=i-o.clientWidth/2,l=r-o.clientHeight/2;this.scrollReq$.emit({x:n,y:l,behavior:a})}else this.scrollReq$.emit({x:i,y:r,behavior:a})}emitScrollActivity(){const e={isSmoothScrolling:this.state.isSmoothScrolling,isScrolling:this.state.isScrolling};this.scrollActivity$.emit(e)}onStoreUpdated(e,i){e!==i&&(this.viewportMetrics$.emit(i.viewportMetrics),(e.isScrolling!==i.isScrolling||e.isSmoothScrolling!==i.isSmoothScrolling)&&this.emitScrollActivity())}async initialize(e){}async destroy(){super.destroy(),this.viewportMetrics$.clear(),this.viewportResize$.clear(),this.scrollMetrics$.clear(),this.scrollReq$.clear(),this.scrollActivity$.clear(),this.rectProvider=null}};Jt.id="viewport";let at=Jt;const As={manifest:Ns,create:(t,e)=>new at(Xt,t,e),reducer:Hs,initialState:Qt},Ms=()=>Ie(at.id),Us=()=>ze(at.id);function Gs(){const{plugin:t}=Ms();let e=oe(null);return Xi(()=>{if(!t)return;const i=S(e);if(!i)return;const r=()=>{const n=i.getBoundingClientRect();return{origin:{x:n.left,y:n.top},size:{width:n.width,height:n.height}}};t.registerBoundingRectProvider(r);const s=()=>{t?.setViewportScrollMetrics({scrollTop:i.scrollTop,scrollLeft:i.scrollLeft})};i.addEventListener("scroll",s);const a=new ResizeObserver(()=>{t?.setViewportResizeMetrics({width:i.offsetWidth,height:i.offsetHeight,clientWidth:i.clientWidth,clientHeight:i.clientHeight,scrollTop:i.scrollTop,scrollLeft:i.scrollLeft,scrollWidth:i.scrollWidth,scrollHeight:i.scrollHeight})});a.observe(i);const o=t.onScrollRequest(({x:n,y:l,behavior:c="auto"})=>{requestAnimationFrame(()=>{i.scrollTo({left:n,top:l,behavior:c})})});return()=>{t?.registerBoundingRectProvider(null),i.removeEventListener("scroll",s),a.disconnect(),o()}}),{get containerRef(){return S(e)},set containerRef(i){te(e,i,!0)}}}var Ws=P("<div><!></div>");function Vs(t,e){Y(e,!0);let i=Fe(e,["$$slots","$$events","$$legacy","children","class"]),r=oe(0),s=Gs();const a=Us();V(()=>{a.provides&&te(r,a.provides.getViewportGap(),!0)});var o=Ws();Ye(o,l=>({...i,class:e.class,[ae]:l}),[()=>({width:"100%",height:"100%",overflow:"auto",padding:`${S(r)}px`})]);var n=K(o);ie(n,()=>e.children),B(o),Ot(o,l=>s.containerRef=l,()=>s?.containerRef),z(t,o),Q()}var A=(t=>(t.Vertical="vertical",t.Horizontal="horizontal",t))(A||{});class ei{constructor(e){this.pageGap=e.pageGap??20,this.viewportGap=e.viewportGap??20,this.bufferSize=e.bufferSize??2}getVisibleRange(e,i,r){const s=this.getScrollOffset(e),a=this.getClientSize(e),o=s,n=s+a;let l=0;for(;l<i.length&&(i[l].offset+i[l].height)*r<=o;)l++;let c=l;for(;c<i.length&&i[c].offset*r<=n;)c++;return{start:Math.max(0,l-this.bufferSize),end:Math.min(i.length-1,c+this.bufferSize-1)}}handleScroll(e,i,r){const s=this.getVisibleRange(e,i,r),a=i.slice(s.start,s.end+1),o=this.calculatePageVisibility(a,e,r),n=o.map(f=>f.pageNumber),l=i.slice(s.start,s.end+1).flatMap(f=>f.index),c=this.determineCurrentPage(o),u=i[s.start],h=i[s.end],g=u?u.offset*r:0,d=h?(i[i.length-1].offset+i[i.length-1].height)*r-(h.offset+h.height)*r:0;return{currentPage:c,visiblePages:n,pageVisibilityMetrics:o,renderedPageIndexes:l,scrollOffset:{x:e.scrollLeft,y:e.scrollTop},startSpacing:g,endSpacing:d}}calculatePageVisibility(e,i,r){const s=[];return e.forEach(a=>{a.pageLayouts.forEach(o=>{const n=a.x*r,l=a.y*r,c=n+o.x*r,u=l+o.y*r,h=o.rotatedWidth*r,g=o.rotatedHeight*r,d=i.scrollLeft,f=i.scrollTop,C=d+i.clientWidth,I=f+i.clientHeight,p=Math.max(c,d),w=Math.max(u,f),E=Math.min(c+h,C),k=Math.min(u+g,I);if(p<E&&w<k){const _=E-p,b=k-w,m=h*g,x=_*b;s.push({pageNumber:o.pageNumber,viewportX:p-d,viewportY:w-f,visiblePercentage:x/m*100,original:{pageX:(p-c)/r,pageY:(w-u)/r,visibleWidth:_/r,visibleHeight:b/r,scale:1},scaled:{pageX:p-c,pageY:w-u,visibleWidth:_,visibleHeight:b,scale:r}})}})}),s}determineCurrentPage(e){if(e.length===0)return 1;const i=Math.max(...e.map(s=>s.visiblePercentage)),r=e.filter(s=>s.visiblePercentage===i);return r.length===1?r[0].pageNumber:r.sort((s,a)=>s.pageNumber-a.pageNumber)[0].pageNumber}getRectLocationForPage(e,i,r){const s=i.find(n=>n.pageNumbers.includes(e));if(!s)return null;const a=s.pageLayouts.find(n=>n.pageNumber===e);if(!a)return null;let o=0;if(r){const n=r.width;s.width<n&&(o=(n-s.width)/2)}return{origin:{x:s.x+a.x+o,y:s.y+a.y},size:{width:a.width,height:a.height}}}getScrollPositionForPage(e,i,r,s,a){const o=this.getTotalContentSize(i),n=this.getRectLocationForPage(e,i,o);if(!n)return null;const l=Be(n.origin,r);if(a){const c=Cr({width:n.size.width,height:n.size.height},{x:a.x,y:a.y},s,r);return{x:l.x+c.x+this.viewportGap,y:l.y+c.y+this.viewportGap}}return{x:l.x+this.viewportGap,y:l.y+this.viewportGap}}getRectPositionForPage(e,i,r,s,a){const o=this.getTotalContentSize(i),n=this.getRectLocationForPage(e,i,o);if(!n)return null;const l=Be(n.origin,r),c=xr({width:n.size.width,height:n.size.height},a,s,r);return{origin:{x:l.x+c.origin.x,y:l.y+c.origin.y},size:c.size}}}class Ae extends ei{constructor(e){super(e)}createVirtualItems(e){let i=0;return e.map((r,s)=>{let a=0;const o=r.map(u=>{const h={pageNumber:u.index+1,pageIndex:u.index,x:a,y:0,width:u.size.width,height:u.size.height,rotatedWidth:u.rotatedSize.width,rotatedHeight:u.rotatedSize.height};return a+=u.rotatedSize.width+this.pageGap,h}),n=r.reduce((u,h,g)=>u+h.rotatedSize.width+(g<r.length-1?this.pageGap:0),0),l=Math.max(...r.map(u=>u.rotatedSize.height)),c={id:`item-${s}`,x:0,y:i,offset:i,width:n,height:l,pageLayouts:o,pageNumbers:r.map(u=>u.index+1),index:s};return i+=l+this.pageGap,c})}getTotalContentSize(e){if(e.length===0)return{width:0,height:0};const i=Math.max(...e.map(s=>s.width)),r=e[e.length-1].y+e[e.length-1].height;return{width:i,height:r}}getScrollOffset(e){return e.scrollTop}getClientSize(e){return e.clientHeight}}class Me extends ei{constructor(e){super(e)}createVirtualItems(e){let i=0;return e.map((r,s)=>{let a=0;const o=r.map(u=>{const h={pageNumber:u.index+1,pageIndex:u.index,x:a,y:0,width:u.size.width,height:u.size.height,rotatedWidth:u.rotatedSize.width,rotatedHeight:u.rotatedSize.height};return a+=u.rotatedSize.width+this.pageGap,h}),n=r.reduce((u,h,g)=>u+h.rotatedSize.width+(g<r.length-1?this.pageGap:0),0),l=Math.max(...r.map(u=>u.rotatedSize.height)),c={id:`item-${s}`,x:i,y:0,offset:i,width:n,height:l,pageLayouts:o,pageNumbers:r.map(u=>u.index+1),index:s};return i+=n+this.pageGap,c})}getTotalContentSize(e){if(e.length===0)return{width:0,height:0};const i=e[e.length-1].x+e[e.length-1].width,r=Math.max(...e.map(s=>s.height));return{width:i,height:r}}getScrollOffset(e){return e.scrollLeft}getClientSize(e){return e.clientWidth}}const ti="UPDATE_SCROLL_STATE",Bs="SET_DESIRED_SCROLL_POSITION",ii="UPDATE_TOTAL_PAGES",ri="SET_PAGE_CHANGE_STATE";function Ct(t){return{type:ti,payload:t}}function Ps(t){return{type:ii,payload:t}}function Tt(t){return{type:ri,payload:t}}const Xs=(t,e)=>({startSpacing:t.startSpacing,endSpacing:t.endSpacing,totalWidth:t.totalContentSize.width*e,totalHeight:t.totalContentSize.height*e,pageGap:t.pageGap*e,strategy:t.strategy,items:t.renderedPageIndexes.map(i=>({...t.virtualItems[i],pageLayouts:t.virtualItems[i].pageLayouts.map(r=>({...r,rotatedWidth:r.rotatedWidth*e,rotatedHeight:r.rotatedHeight*e,width:r.width*e,height:r.height*e}))}))}),si=class extends be{constructor(e,i,r){var s,a,o,n;super(e,i),this.id=e,this.config=r,this.currentScale=1,this.currentRotation=Qe.Degree0,this.currentPage=1,this.layoutReady=!1,this.pageChangeState$=M(),this.layout$=M(),this.scroll$=M(),this.state$=M(),this.scrollerLayout$=M(),this.pageChange$=M(),this.layoutReady$=M(),this.viewport=this.registry.getPlugin("viewport").provides(),this.strategyConfig={pageGap:((s=this.config)==null?void 0:s.pageGap)??10,viewportGap:this.viewport.getViewportGap(),bufferSize:((a=this.config)==null?void 0:a.bufferSize)??2},this.strategy=((o=this.config)==null?void 0:o.strategy)===A.Horizontal?new Me(this.strategyConfig):new Ae(this.strategyConfig),this.initialPage=(n=this.config)==null?void 0:n.initialPage,this.currentScale=this.coreState.core.scale,this.currentRotation=this.coreState.core.rotation,this.viewport.onScrollActivity(l=>{this.state.pageChangeState.isChanging&&!l.isSmoothScrolling&&this.completePageChange()}),this.viewport.onViewportChange(l=>this.commitMetrics(this.computeMetrics(l)),{mode:"throttle",wait:100}),this.coreStore.onAction(we,(l,c)=>{const u=c.core.pages.length;this.dispatch(Ps(u)),this.pageChange$.emit({pageNumber:this.currentPage,totalPages:u}),this.refreshAll(pe(c.core),this.viewport.getMetrics())}),this.coreStore.onAction(_e,(l,c)=>this.refreshAll(pe(c.core),this.viewport.getMetrics())),this.coreStore.onAction(Le,(l,c)=>this.refreshAll(pe(c.core),this.viewport.getMetrics()))}startPageChange(e,i="smooth"){const r={isChanging:!0,targetPage:e,fromPage:this.currentPage,startTime:Date.now()};this.dispatch(Tt(r)),i==="instant"&&this.completePageChange()}completePageChange(){if(!this.state.pageChangeState.isChanging)return;const e={isChanging:!1,targetPage:this.state.pageChangeState.targetPage,fromPage:this.state.pageChangeState.fromPage,startTime:this.state.pageChangeState.startTime};this.dispatch(Tt(e))}computeLayout(e){const i=this.strategy.createVirtualItems(e),r=this.strategy.getTotalContentSize(i);return{virtualItems:i,totalContentSize:r}}computeMetrics(e,i=this.state.virtualItems){return this.strategy.handleScroll(e,i,this.currentScale)}commit(e,i){this.dispatch(Ct(e)),i?.layout&&this.layout$.emit(i.layout),i?.metrics&&(this.scroll$.emit(i.metrics),i.metrics.currentPage!==this.currentPage&&(this.currentPage=i.metrics.currentPage,this.pageChange$.emit({pageNumber:this.currentPage,totalPages:this.state.totalPages}))),this.scrollerLayout$.emit(this.getScrollerLayout())}commitMetrics(e){this.commit(e,{metrics:e})}refreshAll(e,i){const r=this.computeLayout(e),s=this.computeMetrics(i,r.virtualItems);this.commit({...r,...s},{layout:r,metrics:s})}getVirtualItemsFromState(){return this.state.virtualItems||[]}onScrollerData(e){return this.scrollerLayout$.on(e)}getScrollerLayout(){const e=this.coreState.core.scale;return Xs(this.state,e)}pushScrollLayout(){this.scrollerLayout$.emit(this.getScrollerLayout())}onStoreUpdated(e,i){this.pushScrollLayout(),e.pageChangeState!==i.pageChangeState&&this.pageChangeState$.emit(i.pageChangeState)}onCoreStoreUpdated(e,i){e.core.scale!==i.core.scale&&(this.currentScale=i.core.scale,this.commitMetrics(this.computeMetrics(this.viewport.getMetrics()))),e.core.rotation!==i.core.rotation&&(this.currentRotation=i.core.rotation)}setScrollStrategy(e){if(e===A.Horizontal&&this.strategy instanceof Me||e===A.Vertical&&this.strategy instanceof Ae)return;this.strategy=e===A.Horizontal?new Me(this.strategyConfig):new Ae(this.strategyConfig),this.dispatch(Ct({strategy:e}));const i=pe(this.coreState.core);this.refreshAll(i,this.viewport.getMetrics())}setLayoutReady(){this.layoutReady||(this.layoutReady=!0,this.layoutReady$.emit(!0),this.initialPage&&this.scrollToPage({pageNumber:this.initialPage,behavior:"instant"}))}buildCapability(){return{onStateChange:this.state$.on,onLayoutChange:this.layout$.on,onScroll:this.scroll$.on,onPageChange:this.pageChange$.on,onLayoutReady:this.layoutReady$.on,onPageChangeState:this.pageChangeState$.on,getCurrentPage:()=>this.currentPage,getTotalPages:()=>this.state.totalPages,getPageChangeState:()=>this.state.pageChangeState,scrollToPage:this.scrollToPage.bind(this),scrollToNextPage:this.scrollToNextPage.bind(this),scrollToPreviousPage:this.scrollToPreviousPage.bind(this),getMetrics:this.getMetrics.bind(this),getLayout:this.getLayout.bind(this),getRectPositionForPage:this.getRectPositionForPage.bind(this),getPageGap:()=>this.state.pageGap,setScrollStrategy:e=>this.setScrollStrategy(e)}}scrollToPage(e){const{pageNumber:i,behavior:r="smooth",pageCoordinates:s,center:a=!1}=e;this.startPageChange(i,r);const o=this.getVirtualItemsFromState(),n=this.strategy.getScrollPositionForPage(i,o,this.currentScale,this.currentRotation,s);n?this.viewport.scrollTo({...n,behavior:r,center:a}):this.completePageChange()}scrollToNextPage(e="smooth"){const i=this.getVirtualItemsFromState(),r=i.findIndex(s=>s.pageNumbers.includes(this.currentPage));if(r>=0&&r<i.length-1){const s=i[r+1],a=s.pageNumbers[0];this.startPageChange(a,e);const o=this.strategy.getScrollPositionForPage(s.pageNumbers[0],i,this.currentScale,this.currentRotation);o?this.viewport.scrollTo({...o,behavior:e}):this.completePageChange()}}scrollToPreviousPage(e="smooth"){const i=this.getVirtualItemsFromState(),r=i.findIndex(s=>s.pageNumbers.includes(this.currentPage));if(r>0){const s=i[r-1],a=s.pageNumbers[0];this.startPageChange(a,e);const o=this.strategy.getScrollPositionForPage(s.pageNumbers[0],i,this.currentScale,this.currentRotation);o?this.viewport.scrollTo({...o,behavior:e}):this.completePageChange()}}getMetrics(e){const i=e||this.viewport.getMetrics(),r=this.getVirtualItemsFromState();return this.strategy.handleScroll(i,r,this.currentScale)}getLayout(){return{virtualItems:this.state.virtualItems,totalContentSize:this.state.totalContentSize}}getRectPositionForPage(e,i,r,s){return this.strategy.getRectPositionForPage(e+1,this.state.virtualItems,r??this.currentScale,s??this.currentRotation,i)}async initialize(){}async destroy(){this.layout$.clear(),this.scroll$.clear(),this.pageChange$.clear(),this.state$.clear(),this.scrollerLayout$.clear(),this.layoutReady$.clear(),this.pageChangeState$.clear(),super.destroy()}};si.id="scroll";let ai=si;const oi="scroll",Zs={id:oi,name:"Scroll Plugin",version:"1.0.0",provides:["scroll"],requires:["viewport"],optional:[],defaultConfig:{enabled:!0,pageGap:10}},js={currentPage:1,visiblePages:[],pageVisibilityMetrics:[],renderedPageIndexes:[],scrollOffset:{x:0,y:0},startSpacing:0,endSpacing:0},Ks={isChanging:!1,targetPage:1,fromPage:1,startTime:0},Fs=(t,e)=>({virtualItems:[],totalPages:t.pages.length,totalContentSize:{width:0,height:0},desiredScrollPosition:{x:0,y:0},strategy:e.strategy??A.Vertical,pageGap:e.pageGap??10,scale:t.scale,pageChangeState:Ks,...js}),Ys=(t,e)=>{switch(e.type){case ii:return{...t,totalPages:e.payload};case ke:return{...t,scale:e.payload};case ti:return{...t,...e.payload};case Bs:return{...t,desiredScrollPosition:e.payload};case ri:return{...t,pageChangeState:e.payload};default:return t}},Qs={manifest:Zs,create:(t,e)=>new ai(oi,t,e),reducer:Ys,initialState:(t,e)=>Fs(t,e)},Js=()=>Ie(ai.id);var ea=P("<div><!></div>"),ta=P("<div></div>"),ia=P("<div><div></div> <div></div> <div></div> <!></div>");function ra(t,e){Y(e,!0);const i=Js(),r=Ls();let s=ce(()=>{var c;return((c=i.plugin)==null?void 0:c.getScrollerLayout())??null}),a=Fe(e,["$$slots","$$events","$$legacy","RenderPageSnippet","overlayElements"]);V(()=>{if(i.plugin)return i.plugin.onScrollerData(c=>te(s,c))}),V(()=>{i.plugin&&i.plugin.setLayoutReady()});var o=G(),n=$(o);{var l=c=>{var u=ia();Ye(u,E=>({...a,[ae]:E}),[()=>({width:`${S(s).totalWidth}px`,height:`${S(s).totalHeight}px`,position:"relative","box-sizing":"border-box",margin:"0 auto",display:S(s).strategy===A.Horizontal?"flex":null,"flex-direction":S(s).strategy===A.Horizontal?"row":null})]);var h=K(u);let g;var d=Z(h,2);let f;Re(d,21,()=>S(s).items,E=>E.pageNumbers[0],(E,k)=>{var _=ta();let b;Re(_,21,()=>S(k).pageLayouts,m=>m.pageNumber,(m,x)=>{var L=ea();let N;var J=K(L);{let O=ce(()=>({...S(x),rotation:r.coreState.rotation,scale:r.coreState.scale,document:r.coreState.document}));ie(J,()=>e.RenderPageSnippet??he,()=>S(O))}B(L),ue(O=>N=se(L,"",N,O),[()=>({width:`${S(x).rotatedWidth}px`,height:`${S(x).rotatedHeight}px`})]),z(m,L)}),B(_),ue(m=>b=se(_,"",b,m),[()=>({display:"flex","justify-content":"center",gap:`${S(s).pageGap}px`})]),z(E,_)}),B(d);var C=Z(d,2);let I;var p=Z(C,2);{var w=E=>{var k=G(),_=$(k);Re(_,17,()=>e.overlayElements,ar,(b,m)=>{var x=G(),L=$(x);ie(L,()=>S(m)??he),z(b,x)}),z(E,k)};ne(p,E=>{e.overlayElements&&e.overlayElements.length>0&&E(w)})}B(u),ue((E,k,_)=>{g=se(h,"",g,E),f=se(d,"",f,k),I=se(C,"",I,_)},[()=>({width:S(s).strategy===A.Horizontal?`${S(s).startSpacing}px`:"100%",height:S(s).strategy===A.Horizontal?"100%":`${S(s).startSpacing}px`,"flex-shrink":"0"}),()=>({gap:`${S(s).pageGap}px`,display:"flex","align-items":"center",position:"relative","box-sizing":"border-box","flex-direction":S(s).strategy===A.Horizontal?"row":"column","min-width":S(s).strategy===A.Horizontal?"100%":"fit-content"}),()=>({width:S(s).strategy===A.Horizontal?`${S(s).endSpacing}px`:"100%",height:S(s).strategy===A.Horizontal?"100%":`${S(s).endSpacing}px`,"flex-shrink":"0"})]),z(c,u)};ne(n,c=>{S(s)&&r.coreState&&c(l)})}z(t,o),Q()}class sa{async load(e){const{pdfFile:i,options:r,engine:s}=e,a=s.openDocumentUrl(i,r);return new Promise((o,n)=>{a.wait(l=>o(l),l=>{l.type==="abort"?n(new Error(`PDF loading aborted: ${l.reason}`)):n(new Error(`PDF loading failed: ${l.reason}`))})})}}class aa{async load(e){const{pdfFile:i,options:r,engine:s}=e,a=s.openDocumentBuffer(i,r);return new Promise((o,n)=>{a.wait(l=>o(l),l=>{l.type==="abort"?n(new Error(`PDF loading aborted: ${l.reason}`)):n(new Error(`PDF loading failed: ${l.reason}`))})})}}class oa{constructor(){this.strategies=new Map,this.strategyResolvers=[];const e=new aa;this.registerStrategy("url",new sa),this.registerStrategy("buffer",e),this.addStrategyResolver(i=>na(i)?this.strategies.get("url"):this.strategies.get("buffer"))}registerStrategy(e,i){this.strategies.set(e,i)}getStrategy(e){return this.strategies.get(e)}addStrategyResolver(e){this.strategyResolvers.push(e)}async loadDocument(e){try{const i=this.resolveStrategy(e);if(!i)throw new Error("No suitable strategy found for the given options");return await i.load(e)}catch(i){throw console.error("Error loading document:",i),i}}resolveStrategy(e){for(const i of this.strategyResolvers){const r=i(e);if(r)return r}}}function na(t){return t.type==="url"}const ni=class extends be{constructor(e,i){super(e,i),this.id=e,this.loaderHandlers$=M(),this.documentLoadedHandlers$=M(),this.openFileRequest$=Ee(),this.documentLoader=new oa}buildCapability(){return{onLoaderEvent:this.loaderHandlers$.on,onDocumentLoaded:this.documentLoadedHandlers$.on,onOpenFileRequest:this.openFileRequest$.on,openFileDialog:()=>this.openFileRequest$.emit("open"),loadDocument:e=>this.loadDocument(e),registerStrategy:(e,i)=>this.documentLoader.registerStrategy(e,i),getDocument:()=>this.loadedDocument,addStrategyResolver:e=>this.documentLoader.addStrategyResolver(e)}}async initialize(e){e.defaultStrategies&&Object.entries(e.defaultStrategies).forEach(([i,r])=>{this.documentLoader.registerStrategy(i,r)}),e.loadingOptions&&(this.loadingOptions=e.loadingOptions)}async postInitialize(){this.loadingOptions&&await this.loadDocument(this.loadingOptions)}async loadDocument(e){try{this.loadedDocument&&this.engine.closeDocument(this.loadedDocument),this.loaderHandlers$.emit({type:"start",documentId:e.pdfFile.id}),this.dispatchCoreAction(gs());const i=await this.documentLoader.loadDocument({...e,engine:this.engine});return this.dispatchCoreAction(ds(i)),this.loadedDocument=i,this.loaderHandlers$.emit({type:"complete",documentId:e.pdfFile.id}),this.documentLoadedHandlers$.emit(i),i}catch(i){const r={type:"error",documentId:e.pdfFile.id,error:i instanceof Error?i:new Error(String(i))};throw this.loaderHandlers$.emit(r),i}}async destroy(){this.loaderHandlers$.clear(),this.documentLoadedHandlers$.clear(),this.openFileRequest$.clear(),super.destroy()}};ni.id="loader";let li=ni;const ci="loader",la={id:ci,name:"Loader Plugin",version:"1.0.0",provides:["loader"],requires:[],optional:[],metadata:{name:"Loader Plugin",description:"A plugin for loading PDF documents",version:"1.0.0",author:"EmbedPDF",license:"MIT"},defaultConfig:{enabled:!0}},ca={manifest:la,create:t=>new li(ci,t),reducer:()=>{},initialState:{}},ua=()=>ze(li.id);async function ha(t,e){var i;const s=(i=t.target.files)==null?void 0:i[0],a=e.provides;if(s&&a){const o=await s.arrayBuffer();await a.loadDocument({type:"buffer",pdfFile:{id:Math.random().toString(36).substring(2,15),name:s.name,content:o}})}}var ga=P('<input type="file" accept="application/pdf" style="display: none"/>');function da(t,e){Y(e,!0);const i=ua();let r=null;V(()=>{if(!i.provides)return;const a=i.provides.onOpenFileRequest(o=>{o==="open"&&r&&r.click()});return()=>{a()}});var s=ga();s.__change=[ha,i],Ot(s,a=>r=a,()=>r),z(t,s),Q()}Ke(["change"]);const pa=ks(ca).addUtility(da).build(),ui=class extends be{constructor(e,i){super(e,i),this.refreshPages$=Ee(),this.coreStore.onAction(us,r=>{this.refreshPages$.emit(r.payload)})}async initialize(e){}buildCapability(){return{renderPage:this.renderPage.bind(this),renderPageRect:this.renderPageRect.bind(this)}}onRefreshPages(e){return this.refreshPages$.on(e)}renderPage({pageIndex:e,options:i}){const r=this.coreState.core;if(!r.document)throw new Error("document does not open");const s=r.document.pages.find(a=>a.index===e);if(!s)throw new Error("page does not exist");return this.engine.renderPage(r.document,s,i)}renderPageRect({pageIndex:e,rect:i,options:r}){const s=this.coreState.core;if(!s.document)throw new Error("document does not open");const a=s.document.pages.find(o=>o.index===e);if(!a)throw new Error("page does not exist");return this.engine.renderPageRect(s.document,a,i,r)}};ui.id="render";let ot=ui;const hi="render",fa={id:hi,name:"Render Plugin",version:"1.0.0",provides:["render"],requires:[],optional:[],defaultConfig:{enabled:!0}},ma={manifest:fa,create:t=>new ot(hi,t),reducer:()=>{},initialState:{}},va=()=>Ie(ot.id),ya=()=>ze(ot.id);var wa=P("<img/>");function ba(t,e){Y(e,!0);let i=Fe(e,["$$slots","$$events","$$legacy","pageIndex","scale","dpr","class"]);const r=ya(),s=va(),a=ce(()=>e.scale??1);let o=oe(null),n=null,l=oe(0);V(()=>{if(s.plugin)return s.plugin.onRefreshPages(d=>{d.includes(e.pageIndex)&&Zi(l)})}),V(()=>{S(l);const d=r.provides;if(!d)return;const f=d.renderPage({pageIndex:e.pageIndex,options:{scaleFactor:S(a),dpr:e.dpr||window.devicePixelRatio}});return f.wait(C=>{const I=URL.createObjectURL(C);n&&URL.revokeObjectURL(n),te(o,I,!0),n=I},Gt),()=>{n?(URL.revokeObjectURL(n),n=null):f.abort({code:et.Cancelled,message:"canceled render task"})}});function c(){n&&(URL.revokeObjectURL(n),n=null)}var u=G(),h=$(u);{var g=d=>{var f=wa();Ye(f,()=>({src:S(o),onload:c,...i,style:"width: 100%; height: 100%;",class:e.class,alt:""})),Ki(f),z(d,f)};ne(h,d=>{S(o)&&d(g)})}z(t,u),Q()}var W=(t=>(t.Automatic="automatic",t.FitPage="fit-page",t.FitWidth="fit-width",t))(W||{}),re=(t=>(t[t.Center=0]="Center",t[t.Top=1]="Top",t))(re||{});const gi="zoom",Sa={id:gi,name:"Zoom Plugin",version:"1.0.0",provides:["zoom"],requires:["viewport","scroll"],optional:["interaction-manager"],defaultConfig:{enabled:!0,defaultZoomLevel:W.Automatic,minZoom:.2,maxZoom:60,zoomStep:.1,zoomRanges:[{min:.2,max:.5,step:.05},{min:.5,max:1,step:.1},{min:1,max:2,step:.2},{min:2,max:4,step:.4},{min:4,max:10,step:.8},{min:10,max:20,step:1.6},{min:20,max:40,step:3.2},{min:40,max:60,step:6.4}],presets:[{name:"Fit Page",value:W.FitPage},{name:"Fit Width",value:W.FitWidth},{name:"Automatic",value:W.Automatic},{name:"25%",value:.25},{name:"50%",value:.5},{name:"100%",value:1},{name:"125%",value:1.25},{name:"150%",value:1.5},{name:"200%",value:2},{name:"400%",value:4},{name:"800%",value:8},{name:"1600%",value:16}]}},di="SET_ZOOM_LEVEL",pi="SET_INITIAL_ZOOM_LEVEL";function Ra(t,e){return{type:di,payload:{zoomLevel:t,currentZoomLevel:e}}}function Ca(t){return{type:pi,payload:{zoomLevel:t}}}const nt={zoomLevel:W.Automatic,currentZoomLevel:1},Ta=(t=nt,e)=>{switch(e.type){case di:return{...t,zoomLevel:e.payload.zoomLevel,currentZoomLevel:e.payload.currentZoomLevel};case pi:return{...t,zoomLevel:e.payload.zoomLevel};default:return t}};function xa(t){const{pageSize:e,scale:i,minDragPx:r=5,onPreview:s,onCommit:a,onSmallDrag:o}=t;let n=null,l=null;return{onPointerDown:(c,u)=>{var h;n=c,l={origin:{x:c.x,y:c.y},size:{width:0,height:0}},s?.(l),(h=u.setPointerCapture)==null||h.call(u)},onPointerMove:c=>{if(!n)return;const u=xe(c.x,0,e.width),h=xe(c.y,0,e.height);l={origin:{x:Math.min(n.x,u),y:Math.min(n.y,h)},size:{width:Math.abs(u-n.x),height:Math.abs(h-n.y)}},s?.(l)},onPointerUp:(c,u)=>{var h;l&&(Math.max(l.size.width,l.size.height)*i>r?a?.(l):o?.()),n=null,l=null,s?.(null),(h=u.releasePointerCapture)==null||h.call(u)},onPointerCancel:(c,u)=>{var h;n=null,l=null,s?.(null),(h=u.releasePointerCapture)==null||h.call(u)}}}const fi=class extends be{constructor(e,i,r){var s;super(e,i),this.zoom$=Ee(),this.state$=M(),this.viewportPlugin=i.getPlugin("viewport"),this.viewport=this.viewportPlugin.provides(),this.scroll=i.getPlugin("scroll").provides();const a=i.getPlugin("interaction-manager");this.interactionManager=a?.provides()??null,this.minZoom=r.minZoom??.25,this.maxZoom=r.maxZoom??10,this.zoomStep=r.zoomStep??.1,this.presets=r.presets??[],this.zoomRanges=this.normalizeRanges(r.zoomRanges??[]),this.dispatch(Ca(r.defaultZoomLevel)),this.viewport.onViewportResize(()=>this.recalcAuto(re.Top),{mode:"debounce",wait:150}),this.coreStore.onAction(_e,()=>this.recalcAuto(re.Top)),this.coreStore.onAction(Le,()=>this.recalcAuto(re.Top)),this.coreStore.onAction(we,()=>this.recalcAuto(re.Top)),(s=this.interactionManager)==null||s.registerMode({id:"marqueeZoom",scope:"page",exclusive:!0,cursor:"zoom-in"}),this.resetReady()}buildCapability(){return{onZoomChange:this.zoom$.on,onStateChange:this.state$.on,zoomIn:()=>this.zoomIn(),zoomOut:()=>this.zoomOut(),zoomToArea:(e,i)=>this.zoomToArea(e,i),requestZoom:(e,i)=>this.handleRequest({level:e,center:i}),requestZoomBy:(e,i)=>{const r=this.state.currentZoomLevel,s=this.toZoom(r+e);return this.handleRequest({level:s,center:i})},enableMarqueeZoom:()=>{var e;(e=this.interactionManager)==null||e.activate("marqueeZoom")},disableMarqueeZoom:()=>{var e;(e=this.interactionManager)==null||e.activateDefaultMode()},toggleMarqueeZoom:()=>{var e,i,r;((e=this.interactionManager)==null?void 0:e.getActiveMode())==="marqueeZoom"?(i=this.interactionManager)==null||i.activateDefaultMode():(r=this.interactionManager)==null||r.activate("marqueeZoom")},isMarqueeZoomActive:()=>{var e;return((e=this.interactionManager)==null?void 0:e.getActiveMode())==="marqueeZoom"},registerMarqueeOnPage:e=>this.registerMarqueeOnPage(e),getState:()=>this.state,getPresets:()=>this.presets}}zoomOut(){const e=this.state.currentZoomLevel;return this.handleRequest({level:e,delta:-this.stepFor(e)})}zoomIn(){const e=this.state.currentZoomLevel;return this.handleRequest({level:e,delta:this.stepFor(e)})}zoomToArea(e,i){this.handleZoomToArea(e,i)}async initialize(){this.markReady()}async destroy(){this.zoom$.clear()}normalizeRanges(e){return[...e].filter(i=>i.step>0&&i.max>i.min).sort((i,r)=>i.min-r.min)}stepFor(e){const i=this.zoomRanges.find(r=>e>=r.min&&e<r.max);return i?i.step:this.zoomStep}toZoom(e){return parseFloat(xe(e,this.minZoom,this.maxZoom).toFixed(2))}handleRequest({level:e,delta:i=0,center:r,focus:s=re.Center,align:a="keep"}){const o=this.viewport.getMetrics(),n=this.state.currentZoomLevel;if(o.clientWidth===0||o.clientHeight===0)return;const l=typeof e=="number"?e:this.computeZoomForMode(e,o);if(l===!1)return;const c=xe(l+i,this.minZoom,this.maxZoom),u=Math.floor(c*100)/100,h=r??{vx:o.clientWidth/2,vy:s===re.Top?0:o.clientHeight/2},{desiredScrollLeft:g,desiredScrollTop:d}=this.computeScrollForZoomChange(o,n,u,h,a);!isNaN(g)&&!isNaN(d)&&this.viewportPlugin.setViewportScrollMetrics({scrollLeft:g,scrollTop:d}),this.dispatch(Ra(typeof e=="number"?u:e,u)),this.dispatchCoreAction(ps(u)),this.markReady(),this.viewport.scrollTo({x:g,y:d,behavior:"instant"});const f={oldZoom:n,newZoom:u,level:e,center:h,desiredScrollLeft:g,desiredScrollTop:d,viewport:o};this.zoom$.emit(f)}computeZoomForMode(e,i){const r=pe(this.coreState.core);if(!r.length)return!1;const s=this.scroll.getPageGap(),a=this.viewport.getViewportGap();if(i.clientWidth===0||i.clientHeight===0)return!1;const o=i.clientWidth-2*a,n=i.clientHeight-2*a;if(o<=0||n<=0)return!1;let l=0,c=0;switch(r.forEach(u=>{const h=u.reduce((d,f,C)=>d+f.rotatedSize.width+(C?s:0),0),g=Math.max(...u.map(d=>d.rotatedSize.height));l=Math.max(l,h),c=Math.max(c,g)}),e){case W.FitWidth:return o/l;case W.FitPage:return Math.min(o/l,n/c);case W.Automatic:return Math.min(o/l,1);default:return 1}}computeScrollForZoomChange(e,i,r,s,a="keep"){const o=this.scroll.getLayout(),n=this.viewport.getViewportGap(),l=o.totalContentSize.width,c=o.totalContentSize.height,u=e.clientWidth-2*n,h=e.clientHeight-2*n,g=(m,x,L)=>x*L<m?(m-x*L)/2:0,d=g(u,l,i),f=g(h,c,i),C=g(u,l,r),I=g(h,c,r),p=(e.scrollLeft+s.vx-n-d)/i,w=(e.scrollTop+s.vy-n-f)/i,E=p*r+n+C,k=w*r+n+I,_=a==="center"?E-e.clientWidth/2:E-s.vx,b=a==="center"?k-e.clientHeight/2:k-s.vy;return{desiredScrollLeft:Math.max(0,_),desiredScrollTop:Math.max(0,b)}}handleZoomToArea(e,i){const r=this.coreState.core.rotation,s=this.viewport.getMetrics(),a=this.viewport.getViewportGap(),o=this.state.currentZoomLevel,n=s.clientWidth-2*a,l=s.clientHeight-2*a,c=this.scroll.getLayout(),u=c.virtualItems.find(m=>m.pageLayouts.some(x=>x.pageIndex===e));if(!u)return;const h=u.pageLayouts.find(m=>m.pageIndex===e),g=Mt({width:h.width,height:h.height},i,r),d=this.toZoom(Math.min(n/g.size.width,l/g.size.height)),f=u.x+h.x,C=u.y+h.y,I=f+g.origin.x+g.size.width/2,p=C+g.origin.y+g.size.height/2,w=(m,x,L)=>x*L<m?(m-x*L)/2:0,E=w(n,c.totalContentSize.width,o),k=w(l,c.totalContentSize.height,o),_=a+E+I*o-s.scrollLeft,b=a+k+p*o-s.scrollTop;this.handleRequest({level:d,center:{vx:_,vy:b},align:"center"})}recalcAuto(e){const i=this.state;(i.zoomLevel===W.Automatic||i.zoomLevel===W.FitPage||i.zoomLevel===W.FitWidth)&&this.handleRequest({level:i.zoomLevel,focus:e})}onStoreUpdated(e,i){this.state$.emit(i)}registerMarqueeOnPage(e){if(!this.interactionManager)return this.logger.warn("ZoomPlugin","MissingDependency","Interaction manager plugin not loaded, marquee zoom disabled"),()=>{};const i=this.coreState.core.document;if(!i)return this.logger.warn("ZoomPlugin","DocumentNotFound","Document not found"),()=>{};const r=i.pages[e.pageIndex];if(!r)return this.logger.warn("ZoomPlugin","PageNotFound",`Page ${e.pageIndex} not found`),()=>{};const s=xa({pageSize:r.size,scale:e.scale,onPreview:e.callback.onPreview,onCommit:o=>{var n,l;this.zoomToArea(e.pageIndex,o),(l=(n=e.callback).onCommit)==null||l.call(n,o)},onSmallDrag:()=>{var o,n;this.zoomIn(),(n=(o=e.callback).onSmallDrag)==null||n.call(o)}});return this.interactionManager.registerHandlers({modeId:"marqueeZoom",handlers:s,pageIndex:e.pageIndex})}};fi.id="zoom";let mi=fi;const ka={manifest:Sa,create:(t,e)=>new mi(gi,t,e),reducer:Ta,initialState:nt},_a=()=>ze(mi.id),La=()=>{const t=_a(),e=ee({get provides(){return t.provides},state:nt});return V(()=>{if(t.provides)return t.provides.onStateChange(i=>{e.state=i})}),e},Ea=(t,e=he)=>{var i=Ia();let r;var s=K(i);ba(s,{get pageIndex(){return e().pageIndex}}),B(i),ue(()=>r=se(i,"",r,{width:`${e().width??""}px`,height:`${e().height??""}px`,position:"relative"})),z(t,i)};var Ia=P("<div><!></div>"),za=P('<div class="loading-pane svelte-jb02kb">Loading PDF Engine...</div>'),Na=P('<div class="pdf-container svelte-jb02kb" style="border: 1px solid black;"><!></div>');function Oa(t,e){Y(e,!1);const i=os(),r=[de(pa,{loadingOptions:{type:"url",pdfFile:{id:"HMS-pdf",url:`${window.location.origin}${ir}/test.pdf`}}}),de(As),de(Qs),de(ma),de(ka,{defaultZoomLevel:W.FitPage})];xt();var s=Na(),a=K(s);{var o=l=>{var c=za();z(l,c)},n=l=>{zs(l,{get engine(){return i.engine},get plugins(){return r},children:(c,u)=>{Vs(c,{class:"viewport-class",children:(h,g)=>{ra(h,{get RenderPageSnippet(){return Ea}})},$$slots:{default:!0}})},$$slots:{default:!0}})};ne(a,l=>{i.isLoading||!i.engine?l(o):l(n,!1)})}B(s),z(t,s),Q()}var qa=P('<div class="mt-4 mb-4 flex flex-wrap items-center gap-3 rounded-lg border border-gray-200 bg-white p-3 shadow-sm"><div class="flex items-center gap-2"><span class="text-xs font-medium tracking-wide text-gray-600 uppercase">Zoom</span> <div class="min-w-[60px] rounded border border-gray-200 bg-gray-50 px-2 py-1 text-center font-mono text-sm text-gray-800"> </div></div> <div class="h-6 w-px bg-gray-200"></div> <div class="flex items-center gap-1"><button class="flex h-8 w-8 items-center justify-center rounded-md border border-gray-300 bg-white text-gray-700 transition-colors duration-150 hover:border-gray-400 hover:bg-gray-50 hover:text-gray-900 active:bg-gray-100">-</button> <button class="flex h-8 w-8 items-center justify-center rounded-md border border-gray-300 bg-white text-gray-700 transition-colors duration-150 hover:border-gray-400 hover:bg-gray-50 hover:text-gray-900 active:bg-gray-100">+</button> <button class="ml-1 flex h-8 items-center justify-center rounded-md border border-gray-300 bg-white px-3 text-sm font-medium text-gray-700 transition-colors duration-150 hover:border-gray-400 hover:bg-gray-50 hover:text-gray-900 active:bg-gray-100">Reset</button></div></div>');function Da(t,e){Y(e,!0);const i=La();var r=qa(),s=K(r),a=Z(K(s),2),o=K(a);B(a),B(s);var n=Z(s,4),l=K(n);l.__click=()=>i.provides?.zoomOut();var c=Z(l,2);c.__click=()=>i.provides?.zoomIn();var u=Z(c,2);u.__click=()=>i.provides?.requestZoom(1),B(n),B(r),ue(h=>Ji(o,`${h??""}%`),[()=>Math.round(i.state.currentZoomLevel*100)]),z(t,r),Q()}Ke(["click"]);var $a=P('<div class="flex h-full flex-col"><h1 class="pl-2 text-xl font-bold">1. Les HMS introduksjonen</h1> <!> <!> <a class="mt-1 mb-3 inline-flex items-center justify-center self-center rounded-lg bg-blue-600 px-4 py-2 font-medium text-white hover:bg-blue-700">Jeg bekrefter å ha lest og forstått informasjonen over</a></div>');function mo(t,e){Y(e,!1),xt();var i=$a(),r=Z(K(i),2);Da(r,{});var s=Z(r,2);Oa(s,{});var a=Z(s,2);B(i),ue(o=>ve(a,"href",o),[()=>er("/register")]),z(t,i),Q()}export{Pr as A,Za as B,xr as C,Fa as D,Ur as E,Vr as F,so as G,Jr as M,Je as N,eo as P,Qe as R,F as T,co as W,mo as _,et as a,no as b,Br as c,es as d,Ya as e,Xr as f,Fr as g,Kr as h,Gt as i,Zr as j,Wr as k,Gr as l,to as m,ro as n,oo as o,ao as p,ja as q,Ka as r,wt as s,D as t,lo as u,Yr as v,io as w,Qa as x,Ja as y,jr as z};
